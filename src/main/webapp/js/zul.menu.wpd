zk.load('zul.wgt',function(){if(zk._p=zkpi('zul.menu'))try{
(function(){function a(b){if(!b._noFloatUp&&!b._bOver&&zul.menu._nOpen){zWatch.fire("onFloatUp",b)}}zul.menu.Menubar=zk.$extends(zul.Widget,{_orient:"horizontal",setOrient:(function(b,c){return function(d,e){var f=this[b];this[b]=d;if(f!==d||(e&&e.force)){this.__fname__=b.substring(1);c.apply(this,arguments);delete this.__fname__}return this}})("_orient",(function(){this.rerender()})),getOrient:_zkf$=function(){return this._orient},isOrient:_zkf$,setScrollable:(function(b,c){return function(d,e){var f=this[b];this[b]=d;if(f!==d||(e&&e.force)){this.__fname__=b.substring(1);c.apply(this,arguments);delete this.__fname__}return this}})("_scrollable",(function(b){if(this.checkScrollable()){this.rerender()}})),getScrollable:_zkf$=function(){return this._scrollable},isScrollable:_zkf$,setAutodrop:(function(b){return function(c){this[b]=c;return this}})("_autodrop"),getAutodrop:_zkf$=function(){return this._autodrop},isAutodrop:_zkf$,setWidth:function(){this.$supers("setWidth",arguments);this._checkScrolling()},domClass_:function(c){var b=this.$supers("domClass_",arguments);if(!c||!c.zclass){b+=" "+this.$s("vertical"==this.getOrient()?"vertical":"horizontal")}return b},unbind_:function(){if(this.checkScrollable()){var c=this.$n("left"),b=this.$n("right");if(c&&b){this.domUnlisten_(c,"onClick","_doScroll").domUnlisten_(b,"onClick","_doScroll")}zWatch.unlisten({onSize:this})}var d=this.$n();this.domUnlisten_(d,"onMouseEnter").domUnlisten_(d,"onMouseLeave");this._lastTarget=null;this.$supers(zul.menu.Menubar,"unbind_",arguments)},bind_:function(){this.$supers(zul.menu.Menubar,"bind_",arguments);var d=this.$n();this.domListen_(d,"onMouseEnter").domListen_(d,"onMouseLeave");if(this.checkScrollable()){var c=this.$n("left"),b=this.$n("right");if(c&&b){this.domListen_(c,"onClick","_doScroll").domListen_(b,"onClick","_doScroll")}zWatch.listen({onSize:this})}},checkScrollable:function(){return this._scrollable&&("horizontal"==this.getOrient())},onSize:function(){this._checkScrolling()},onChildAdded_:function(b){this.$supers("onChildAdded_",arguments);this._checkScrolling()},onChildRemoved_:function(b){this.$supers("onChildRemoved_",arguments);if(!this.childReplacing_){this._checkScrolling()}},_checkScrolling:function(){if(!this.checkScrollable()){return}var g=this.$n();if(!g){return}jq(g).addClass(this.$s("scroll"));var d=zk(g).offsetWidth(),c=this.$n("body"),h=jq(this.$n("cave")).children(),b=0;for(var e=h.length;e--;){b+=h[e].offsetWidth}if(zk.ie){b+=h.length}var f=d-zk(this.$n("left")).offsetWidth()-zk(this.$n("right")).offsetWidth();if(this._scrolling){if(b<d){this._scrolling=false;c.scrollLeft=0;if(c.offsetWidth<=b){c.style.width=jq.px0(f)}}else{c.style.width=jq.px0(f);this._fixScrollPos(g)}}else{if(b>=d){this._scrolling=true;c.style.width=jq.px0(f)}}this._fixButtonPos(g)},_fixScrollPos:function(){var b=this.$n("body"),d=jq(this.$n("cave")).children();if(d[d.length-1].offsetLeft<b.scrollLeft){var c=d[d.length-1].offsetLeft;b.scrollLeft=c}},_fixButtonPos:function(e){var g=this.getZclass(),b=this.$n("body"),f=this.$n("left"),d=this.$n("right"),c=this._scrolling?"addClass":"removeClass";b.style.marginLeft=this._scrolling?jq.px(f.offsetWidth):"0";b.style.marginRight=this._scrolling?jq.px(d.offsetWidth):"0";f.style.display=d.style.display=this._scrolling?"block":"none";jq(e)[c](this.$s("scroll"))},_forceStyle:function(b,c){if(zk.parseInt(c)<0){return}b.style.width=c},_doMouseEnter:function(b){this._bOver=true;this._noFloatUp=false},_doMouseLeave:function(b){this._bOver=false;this._closeOnOut()},_doScroll:function(b){this._scroll(b.domTarget==this.$n("left")||b.domTarget.parentNode==this.$n("left")?"left":"right")},_scroll:function(k){if(!this.checkScrollable()||this._runId){return}var m=this,f=this.$n("body"),d=f.scrollLeft,g=jq(this.$n("cave")).children(),l=g.length,c=0;if(!l){return}switch(k){case"left":for(var e=0;e<l;e++){if(g[e].offsetLeft>=d||g[e].offsetLeft+(g[e].offsetWidth-f.offsetWidth)>=d){var h=g[e].previousSibling;if(!h){return}c=d-(d-h.offsetLeft);if(isNaN(c)){return}m._runId=setInterval(function(){if(!m._moveTo(f,c)){clearInterval(m._runId);m._runId=null}},10);return}}break;case"right":var b=d+f.offsetWidth;for(var e=0;e<l;e++){var j=g[e].offsetLeft+g[e].offsetWidth;if(j>b){c=d+(j-b);if(isNaN(c)){return}m._runId=setInterval(function(){if(!m._moveTo(f,c)){clearInterval(m._runId);m._runId=null}},10);return}}break}},_moveTo:function(b,d){var f=b.scrollLeft;if(f==d){return false}var e=5,g=f>d?-e:e,c=f+g;if((c<d&&g<0)||(c>d&&g>0)){c=d}b.scrollLeft=c;return true},insertChildHTML_:function(e,c,d){var b="vertical"==this.getOrient();if(c){jq(c.$n("chdextr")||c.$n()).before(this.encloseChildHTML_({child:e,vertical:b}))}else{jq(this.$n("cave")).append(this.encloseChildHTML_({child:e,vertical:b}))}e.bind(d)},removeChildHTML_:function(b){this.$supers("removeChildHTML_",arguments);jq(b.$n("chdextr")).remove()},encloseChildHTML_:function(c){var b=c.out||[],d=c.child;d.redraw(b);if(!c.out){return b.join("")}},_closeOnOut:function(){var b=this;if(b._autodrop&&!zul.Widget.getOpenTooltip()){setTimeout(function(){a(b)},200)}}})})();
zkreg('zul.menu.Menubar');zk._m={};
zk._m['default']=function(b){var c=this.uuid;if("vertical"==this.getOrient()){b.push("<div",this.domAttrs_(),'><ul id="',c,'-cave">');for(var a=this.firstChild;a;a=a.nextSibling){this.encloseChildHTML_({out:b,child:a,vertical:true})}b.push("</ul></div>")}else{var e;b.push("<div",this.domAttrs_(),">");if(e=this.checkScrollable()){var f=this.$s("scrollable"),d=this.$s("icon");b.push('<div id="',c,'-left" class="',this.$s("left")," ",f,'"><i class="',d,' z-icon-chevron-left"></i></div>','<div id="',c,'-right" class="',this.$s("right")," ",f,'"><i class="',d,' z-icon-chevron-right"></i></div>','<div id="',c,'-body" class="',this.$s("body"),'">','<div id="',c,'-cnt" class="',this.$s("content"),'">')}b.push('<ul id="',c,'-cave">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</ul>");if(e){b.push("</div></div>")}b.push("</div>")}};
;zkmld(zk._p.p.Menubar,zk._m);(function(){function e(g,f){if(g.isListen("onClick")){jq(g.$n())[f?"removeClass":"addClass"](g.$s("hover"))}}function c(j,g){if(j.isListen("onClick")){var i=jq(j.$n()).find("."+j.$s("separator")),h=zk(i),f=h.revisedOffset()[0];if(g.pageX>f){jq(j.$n()).addClass(j.$s("selected"));j.menupopup._shallClose=false;j._togglePopup();g.stop()}else{j.fireX(new zk.Event(j,"onClick",g.data))}}else{jq(j.$n()).addClass(j.isTopmost()?j.$s("selected"):j.$s("hover"));j.menupopup._shallClose=false;j._togglePopup()}}function d(f){return f.isVisible()&&f.$instanceof(zul.menu.Menu)}function b(h){for(var f=h;f;f=f.nextSibling){if(d(f)){return f}}var g=h.parent;if(g.firstChild==h){return h}return b(g.firstChild)}function a(h){for(var f=h;f;f=f.previousSibling){if(d(f)){return f}}var g=h.parent;if(g.lastChild==h){return h}return a(g.lastChild)}zul.menu.Menu=zk.$extends(zul.LabelImageWidget,{setContent:(function(f,g){return function(h,i){var j=this[f];this[f]=h;if(j!==h||(i&&i.force)){this.__fname__=f.substring(1);g.apply(this,arguments);delete this.__fname__}return this}})("_content",(function(g){if(!g||g.length==0){return}if(!this._contentHandler){if(zk.feature.pe){var f=this;zk.load("zkex.inp",null,function(){f._contentHandler=new zkex.inp.ContentHandler(f,g)});return}this._contentHandler=new zul.menu.ContentHandler(this,g)}else{this._contentHandler.setContent(g)}})),getContent:_zkf$=function(){return this._content},isContent:_zkf$,setImage:(function(f,g){return function(h,i){var j=this[f];this[f]=h;if(j!==h||(i&&i.force)){this.__fname__=f.substring(1);g.apply(this,arguments);delete this.__fname__}return this}})("_image",(function(f){if(f&&this._preloadImage){zUtl.loadImage(f)}this.rerender()})),getImage:_zkf$=function(){return this._image},isImage:_zkf$,open:function(){if(this.desktop&&this.isTopmost()){jq(this.$n()).addClass(this.$s("selected"));var f=this.getMenubar();if(f._lastTarget){this.$class._rmActive(f._lastTarget)}f._lastTarget=this;this.menupopup._shallClose=false;this._togglePopup()}},getAnchor_:function(){return this.$n("a")},domContent_:function(){var h='<span class="'+this.$s("text")+'">'+(zUtl.encodeXML(this.getLabel()))+"</span>",f=this.getImage(),i='<i class="'+this.$s("icon")+" z-icon-caret-"+(this.isTopmost()&&!this.isVertical_()?"down":"right")+'"></i>',j='<div class="'+this.$s("separator")+'"></div>',g=this.domIcon_();if(f){f='<img id="'+this.uuid+'-img" src="'+f+'" class="'+this.$s("image")+'" align="absmiddle" />'+(g?" "+g:"")}else{if(g){f=g}else{f='<img id="'+this.uuid+'-img" '+(this.isTopmost()?'style="display:none"':"")+' src="data:image/png;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="'+this.$s("image")+'" align="absmiddle" />'}}return f+" "+h+" "+j+i},isTopmost:function(){return this._topmost},beforeParentChanged_:function(f){this._topmost=f&&!(f.$instanceof(zul.menu.Menupopup));this.$supers("beforeParentChanged_",arguments)},onChildAdded_:function(f){this.$supers("onChildAdded_",arguments);if(f.$instanceof(zul.menu.Menupopup)){this.menupopup=f;if(this._contentHandler){this._contentHandler.destroy()}}},onChildRemoved_:function(f){this.$supers("onChildRemoved_",arguments);if(f==this.menupopup){this.menupopup=null;if(this._contentHandler){this._contentHandler.setContent(this._content)}}},getMenubar:function(){for(var f=this.parent;f;f=f.parent){if(f.$instanceof(zul.menu.Menubar)){return f}if(!f.$instanceof(zul.menu.Menupopup,zul.menu.Menu)){break}}return null},onShow:function(){if(this._contentHandler){this._contentHandler.onShow()}},onFloatUp:function(f){if(this._contentHandler){this._contentHandler.onFloatUp(f)}},onHide:function(){if(this._contentHandler){this._contentHandler.onHide()}},focus_:function(g,f){if(this.isTopmost()&&zk(this.getAnchor_()).focus(g)){if(f){this._ignoreActive=true}return true}return this.$supers("focus_",arguments)},_getPrevVisibleMenu:function(){var f=this.previousSibling;if(!f){var g=this.getMenubar();if(g){f=g.lastChild}}return f?a(f):this},_getNextVisibleMenu:function(){var f=this.nextSibling;if(!f){var g=this.getMenubar();if(g){f=g.firstChild}}return f?b(f):this},doKeyDown_:function(g){if(this.isTopmost()){var i=g.keyCode;if(this.isVertical_()){switch(i){case 38:i=37;break;case 40:i=39;break;case 37:i=38;break;case 39:i=40;break}}switch(i){case 38:var f=this.menupopup;if(f&&f.isOpen()){jq(this.$n()).removeClass(this.$s("hover")).removeClass(this.$s("selected"));f.close()}this.$class._addActive(this);g.stop();break;case 40:if(this.menupopup){jq(this.$n()).addClass(this.$s("selected")).removeClass(this.$s("hover"));this.menupopup._shallClose=false;this.menupopup.open()}g.stop();break;case 37:case 39:var h=i==37?this._getPrevVisibleMenu():this._getNextVisibleMenu();if(h){h.focus()}g.stop();break;case 13:if(this.menupopup){c(this,g)}g.stop();break;case 9:this.$class._rmActive(this);break}}this.$supers("doKeyDown_",arguments)},doFocus_:function(){if(this.isTopmost()){var g=this.getMenubar(),f=this.$class;if(g&&g._lastTarget){f._rmActive(g._lastTarget)}if(!this._ignoreActive){f._addActive(this)}}delete this._ignoreActive;this.$supers("doFocus_",arguments)},bind_:function(){this.$supers(zul.menu.Menu,"bind_",arguments);var f=this.getAnchor_();this.domListen_(f,"onFocus","doFocus_").domListen_(f,"onBlur","doBlur_").domListen_(f,"onMouseEnter").domListen_(f,"onMouseLeave");if(this.isTopmost()&&this.isListen("onClick")){jq(this.$n()).addClass(this.$s("clickable"))}if(this._contentHandler){this._contentHandler.bind()}},unbind_:function(){var f=this.getAnchor_();this.domUnlisten_(f,"onFocus","doFocus_").domUnlisten_(f,"onBlur","doBlur_").domUnlisten_(f,"onMouseEnter").domUnlisten_(f,"onMouseLeave");if(this._contentHandler){this._contentHandler.unbind()}this.$supers(zul.menu.Menu,"unbind_",arguments)},_getArrowWidth:function(){return 20},_showContentHandler:function(){var f=this._contentHandler;if(f&&!f.isOpen()){f.onShow()}},doClick_:function(f){if(this.menupopup){if(this.isTopmost()){this.getMenubar()._lastTarget=this}c(this,f)}else{this._showContentHandler()}},doMouseOver_:function(){if(!this.isTopmost()){this._showContentHandler()}this.$supers("doMouseOver_",arguments)},_togglePopup:function(){if(!this.menupopup&&this._contentHandler){this._showContentHandler()}else{if(!this.menupopup.isOpen()){if(this.isTopmost()){e(this)}this.menupopup.open()}else{if(this.isTopmost()){this.menupopup.close({sendOnOpen:true})}else{zk(this.menupopup.$n("a")).focus()}}}},_doMouseEnter:function(f){var h=this.getMenubar();if(h){h._noFloatUp=false}var g=this.isTopmost();if(g){e(this)}if(g&&zk.ie<11&&!jq.isAncestor(this.getAnchor_(),f.domTarget)){return}if(this.menupopup){this.menupopup._shallClose=false}if(!g){zWatch.fire("onFloatUp",this);if(this.menupopup&&!this.menupopup.isOpen()){this.menupopup.open()}}else{if(this.menupopup&&h._autodrop){zWatch.fire("onFloatUp",this);if(!this.menupopup.isOpen()){this.menupopup.open()}}else{var i=h._lastTarget;if(i&&i!=this&&i.menupopup&&i.menupopup.isVisible()){i.menupopup.close({sendOnOpen:true});this.$class._rmActive(i);if(this.menupopup){this.menupopup.open()}}}}this.$class._addActive(this)},_doMouseLeave:function(f){var h=this.getMenubar();this._updateHoverImage();var g=this.isTopmost(),i=this.menupopup;if(g){this.$class._rmActive(this,true);if(i&&h._autodrop){if(i.isOpen()){i._shallClose=true}}}else{if(!i||!i.isOpen()){this.$class._rmActive(this)}}},getImageNode:function(){if(!this._eimg&&(this._image||this._hoverImage)){var f=this.$n();if(f){this._eimg=this.$n("a").firstChild}}return this._eimg},ignoreDescendantFloatUp_:function(f){return f&&f.$instanceof(zul.menu.Menupopup)},isVertical_:function(){if(this.isTopmost()){var f=this.getMenubar();if(f){return"vertical"==f.getOrient()}}return false}},{_isActive:function(i){var h=i.isTopmost(),j=i.$n(),g=i.menupopup,f=h?g&&g.isOpen()?i.$s("selected"):i.$s("hover"):i.$s("hover");return jq(j).hasClass(f)},_addActive:function(j){var h=j.isTopmost(),k=j.$n(),g=j.menupopup,f=h?g&&g.isOpen()?j.$s("selected"):j.$s("hover"):j.$s("hover");jq(k).addClass(f);if(h){var i=j.getMenubar();if(i){i._lastTarget=j}}if(!h&&j.parent.parent.$instanceof(zul.menu.Menu)){this._addActive(j.parent.parent)}},_rmActive:function(k,g){var j=k.isTopmost(),l=k.$n(),i=k.menupopup,f=j?(!g&&i&&i.isOpen())?k.$s("selected"):k.$s("hover"):k.$s("hover");var h=jq(l).removeClass(f);if(j&&!(h.hasClass(k.$s("selected"))||h.hasClass(k.$s("hover")))){e(k,true)}}});zul.menu.ContentHandler=zk.$extends(zk.Object,{$init:function(g,f){this._wgt=g;this._content=f},setContent:function(f){if(this._content!=f||!this._pp){this._content=f;this._wgt.rerender()}},redraw:function(f){var h=this._wgt,g=h.getZclass();f.push('<div id="',h.uuid,'-cnt-pp" class="',h.$s("content-popup"),'" style=""><div class="',h.$s("content-body"),'">',this._content,"</div></div>")},bind:function(){var f=this._wgt;if(!f.menupopup){f.domListen_(f.$n(),"onClick","onShow");zWatch.listen({onFloatUp:f,onHide:f})}this._pp=f.$n("cnt-pp");jq(this._pp,zk).bind("mouseenter",this.proxy(this._doMouseEnter)).bind("mouseleave",this.proxy(this._doMouseLeave))},unbind:function(){var f=this._wgt;if(!f.menupopup){if(this._shadow){this._shadow.destroy();this._shadow=null}f.domUnlisten_(f.$n(),"onClick","onShow");zWatch.unlisten({onFloatUp:f,onHide:f})}jq(this._pp,zk).unbind("mouseenter",this.proxy(this._doMouseEnter)).unbind("mouseleave",this.proxy(this._doMouseLeave));this._pp=null},isOpen:function(){var f=this._pp;return(f&&zk(f).isVisible())},_doMouseEnter:function(){var f=this._wgt.getMenubar();if(f){f._bOver=true}},_doMouseLeave:function(){var f=this._wgt.getMenubar();if(f){f._bOver=false}},onShow:function(){var g=this._wgt,f=this._pp;if(!f){return}f.style.display="block";jq(f).zk.makeVParent();zWatch.fireDown("onVParent",this);zk(f).position(g.$n(),this.getPosition());this.syncShadow()},onHide:function(){var f=this._pp;if(!f||!zk(f).isVisible()){return}f.style.display="none";jq(f).zk.undoVParent();zWatch.fireDown("onVParent",this);this.hideShadow()},onFloatUp:function(f){if(!zUtl.isAncestor(this._wgt,f.origin)){this.onHide()}},syncShadow:function(){if(!this._shadow){this._shadow=new zk.eff.Shadow(this._wgt.$n("cnt-pp"),{stackup:zk.useStackup})}this._shadow.sync()},hideShadow:function(){if(this._shadow){this._shadow.hide()}},destroy:function(){this._wgt.rerender()},getPosition:function(){var f=this._wgt;return f.isVertical_()?"end_before":"after_start"},deferRedrawHTML_:function(f){f.push("<li",this.domAttrs_({domClass:1}),' class="z-renderdefer"></li>')}})})();
zkreg('zul.menu.Menu');zk._m={};
zk._m['default']=function(a){var b=this.uuid,d=this.getZclass(),c=this._contentHandler;a.push("<li",this.domAttrs_(),'><a href="javascript:;" id="',b,'-a" class="',this.$s("content"),'">',this.domContent_(),"</a>");if(this.menupopup){this.menupopup.redraw(a)}else{if(c){c.redraw(a)}}a.push("</li>")};
;zkmld(zk._p.p.Menu,zk._m);(function(){function b(d){zWatch.listen({onShow:d});var c;if(c=d._upload){d._uplder=new zul.Upload(d,d._getUploadRef(),c)}}function a(d){var c;if(c=d._uplder){zWatch.unlisten({onShow:d});d._uplder=null;c.destroy()}}(zul.menu.Menuitem=zk.$extends(zul.LabelImageWidget,{_value:"",setCheckmark:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_checkmark",(_zkf=function(){this.rerender()})),getCheckmark:_zkf$=function(){return this._checkmark},isCheckmark:_zkf$,setDisabled:(function(c,d,e){return function(f,g){var h=this[c];this.__fname__=c.substring(1);this[c]=f=d.apply(this,arguments);if(h!==f||(g&&g.force)){e.apply(this,arguments)}delete this.__fname__;return this}})("_disabled",(function(c,d){if(d&&d.adbs){this._adbs=true}else{if(!d||d.adbs===undefined){this._adbs=false}}if(!c){if(this._adbs){this._adbs=false}else{if(d&&d.adbs===false){return this._disabled}}}return c}),(function(c,d){this.rerender(d&&d.skip?-1:0)})),getDisabled:_zkf$=function(){return this._disabled},isDisabled:_zkf$,setHref:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_href",(_zkf)),getHref:_zkf$=function(){return this._href},isHref:_zkf$,setValue:(function(c){return function(d){this[c]=d;return this}})("_value"),getValue:_zkf$=function(){return this._value},isValue:_zkf$,setChecked:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_checked",(function(d){if(d){this._checkmark=d}var e=this.$n();if(e&&!this.isTopmost()&&!this.getImage()){var c=jq(e);c[d?"addClass":"removeClass"](this.$s("checked"));if(this._checkmark){c.addClass(this.$s("checkable"))}}})),getChecked:_zkf$=function(){return this._checked},isChecked:_zkf$,setAutocheck:(function(c){return function(d){this[c]=d;return this}})("_autocheck"),getAutocheck:_zkf$=function(){return this._autocheck},isAutocheck:_zkf$,setTarget:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_target",(function(d){var c=this.$n("a");if(c){if(this.isTopmost()){c=c.parentNode}c.target=this._target}})),getTarget:_zkf$=function(){return this._target},isTarget:_zkf$,setAutodisable:(function(c){return function(d){this[c]=d;return this}})("_autodisable"),getAutodisable:_zkf$=function(){return this._autodisable},isAutodisable:_zkf$,setUpload:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_upload",(function(c){var d=this.$n();if(d){a(this);if(c&&c!="false"){b(this)}}})),getUpload:_zkf$=function(){return this._upload},isUpload:_zkf$,isTopmost:function(){return this._topmost},beforeParentChanged_:function(c){this._topmost=c&&!(c.$instanceof(zul.menu.Menupopup));this.$supers("beforeParentChanged_",arguments)},domClass_:function(e){var d=this.$supers("domClass_",arguments);if(!e||!e.zclass){var c=this.isDisabled()?this.$s("disabled"):"";if(c){d+=(d?" ":"")+c}c=(!this.getImage()&&this.isCheckmark())?this.$s("checkable")+(this.isChecked()?" "+this.$s("checked"):""):"";if(c){d+=(d?" ":"")+c}}return d},domContent_:function(){var e='<span class="'+this.$s("text")+'">'+(zUtl.encodeXML(this.getLabel()))+"</span>",f='<i class="'+this.$s("icon")+' z-icon-check"></i>',c=this.getImage(),d=this.domIcon_();if(c){c='<img src="'+c+'" class="'+this.$s("image")+'" align="absmiddle" />'+(d?" "+d:"")}else{if(d){c=d}else{c="<img "+(this.isTopmost()?'style="display:none"':"")+' src="data:image/png;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="'+this.$s("image")+'" align="absmiddle" />'}}return c+(this.isAutocheck()||this.isCheckmark()?f:"")+" "+e},getMenubar:function(){for(var c=this.parent;c;c=c.parent){if(c.$instanceof(zul.menu.Menubar)){return c}}return null},bind_:function(){this.$supers(zul.menu.Menuitem,"bind_",arguments);if(!this.isDisabled()){var c=this.$n("a");if(this.isTopmost()){this.domListen_(c,"onFocus","doFocus_").domListen_(c,"onBlur","doBlur_")}this.domListen_(c,"onMouseEnter");if(this._upload){b(this)}}},unbind_:function(){if(!this.isDisabled()){if(this._upload){a(this)}var c=this.$n("a");if(this.isTopmost()){this.domUnlisten_(c,"onFocus","doFocus_").domUnlisten_(c,"onBlur","doBlur_")}this.domUnlisten_(c,"onMouseEnter")}this.$supers(zul.menu.Menuitem,"unbind_",arguments)},doClick_:function(c){if(this._disabled){c.stop()}else{if(!this._canActivate(c)){return}if(!this._upload){zul.wgt.ADBS.autodisable(this)}else{this._uplder.openFileDialog()}var d=this.isTopmost(),f=this.$n("a");if(f.href.startsWith("javascript:")){if(this.isAutocheck()){this.setChecked(!this.isChecked());this.fire("onCheck",this.isChecked())}this.fireX(c)}else{if(zk.ie<11&&d&&this.$n().id!=f.id){zUtl.go(f.href,{target:f.target})}if(zk.gecko&&d&&this.$n().id!=f.id){zUtl.go(f.href,{target:f.target});c.stop()}}if(!d){for(var g=this.parent;g;g=g.parent){if(g.$instanceof(zul.menu.Menupopup)){if(!g.isOpen()||this._uplder){break}this._updateHoverImage();g.close({sendOnOpen:true})}else{if(!g.$instanceof(zul.menu.Menu)){break}else{g._updateHoverImage()}}}}var e;if(zk.webkit&&(e=this.getMenubar())&&e._autodrop){e._noFloatUp=true}this.$super("doClick_",c,true)}},_canActivate:function(c){return !this.isDisabled()&&(!zk.ie<11||!this.isTopmost()||this._uplder||jq.isAncestor(this.$n("a"),c.domTarget))},_getUploadRef:function(){return this.isTopmost()?this.$n():this.$n("a")},_doMouseEnter:function(c){if(zul.menu._nOpen||this.isTopmost()){zWatch.fire("onFloatUp",this)}},deferRedrawHTML_:function(d){var c=this.isTopmost()?"td":"li";d.push("<",c,this.domAttrs_({domClass:1}),' class="z-renderdefer"></',c,">")},getImageNode:function(){if(!this._eimg&&(this._image||this._hoverImage)){var c=this.$n();if(c){this._eimg=this.$n("a").firstChild}}return this._eimg}},{_isActive:function(c){return jq(c.$n()).hasClass(c.$s("hover"))},_addActive:function(d){var c=d.isTopmost();jq(d.$n()).addClass(d.$s("hover"));if(!c&&d.parent.parent.$instanceof(zul.menu.Menu)){this._addActive(d.parent.parent)}},_rmActive:function(c){return jq(c.$n()).removeClass(c.$s("hover"))}})).prototype.onShow=function(){if(this._uplder){this._uplder.sync()}}})();
zkreg('zul.menu.Menuitem');zk._m={};
zk._m['default']=function(a){var b=this.uuid,c=this.getTarget();a.push("<li",this.domAttrs_(),">");a.push('<a href="',this.getHref()?this.getHref():"javascript:;",'"');if(c){a.push(' target="',c,'"')}a.push(' id="',b,'-a" class="',this.$s("content"),'"',this._disabled?' disabled="disabled"':"",">",this.domContent_(),"</a></li>")};
;zkmld(zk._p.p.Menuitem,zk._m);zul.menu.Menuseparator=zk.$extends(zul.Widget,{isPopup:function(){return this.parent&&this.parent.$instanceof(zul.menu.Menupopup)},getMenubar:function(){for(var a=this.parent;a;a=a.parent){if(a.$instanceof(zul.menu.Menubar)){return a}}return null},doMouseOver_:function(){if(zul.menu._nOpen){zWatch.fire("onFloatUp",this)}this.$supers("doMouseOver_",arguments)}});
zkreg('zul.menu.Menuseparator');zk._m={};
zk._m['default']=function(a){a.push("<li",this.domAttrs_(),">&nbsp;</li>")};
;zkmld(zk._p.p.Menuseparator,zk._m);(function(){function c(j){var i=j.parent;return i.$instanceof(zul.menu.Menu)?i:null}function f(j){for(var i=j;i&&(i=c(i));i=i.parent){if(i.isTopmost()){return i}}return null}function e(i){return i.isVisible()&&(i.$instanceof(zul.menu.Menu)||(i.$instanceof(zul.menu.Menuitem)&&!i.isDisabled()))}function a(j,k){if(k){while(k=k.previousSibling){if(e(k)){j._curIndex--;return k}}}j._curIndex=-1;for(var i=j.firstChild;i;i=i.nextSibling){if(e(i)){k=i;j._curIndex++}}return k}function d(j,k){if(k){while(k=k.nextSibling){if(e(k)){j._curIndex++;return k}}}for(var i=j.firstChild;i;i=i.nextSibling){if(e(i)){j._curIndex=0;return i}}}function h(j,m){var k=-1;for(var l=j.firstChild;l;l=l.nextSibling){if(e(l)){k++}if(l==m){return k}}return k}function g(j){var m=j._curIndex;if(m>=0){for(var i=j.firstChild,l=0;i;i=i.nextSibling){if(e(i)&&l++==m){return i}}}}function b(j){var i=j.menupopup;if(i){i._shallClose=false;if(!i.isOpen()){i.open()}}j.$class._addActive(j);zWatch.fire("onFloatUp",j)}zul.menu.Menupopup=zk.$extends(zul.wgt.Popup,{_curIndex:-1,zsync:function(){this.$supers("zsync",arguments);if(!this._shadow){this._shadow=new zk.eff.Shadow(this.$n())}this._shadow.sync()},_hideShadow:function(){if(this._shadow){this._shadow.hide()}},_syncPos:function(){var i=c(this);if(i){var l=this.$n(),o=i.$n(),r=jq(l),s=jq(o),q=r.offset().left,p=s.offset().left,j=r.outerWidth(),v=s.outerWidth(),k=i.parent,t=i.getMenubar(),u=t?t.getOrient():"";if(i.isTopmost()&&u=="horizontal"&&l){l.style.top=jq.px0(zk.parseInt(l.style.top)+zk.parseInt(jq(this.getMenubar()).css("paddingBottom")))}while(k&&!k.$instanceof(zul.menu.Menupopup)){k=k.parent}if((zk(l).isOverlapped(o,1)&&(((p+v-q>5)&&(u!="vertical"))||((q<p+v/2)&&(u=="vertical"))))||(k&&k._shallSync)){this._shallSync=true;l.style.left=jq.px0(p-j);if(zk.ie){this.onShow()}}}},close:function(){if(this.isOpen()){zul.menu._nOpen--}this.$supers("close",arguments);jq(this.$n()).hide();this._hideShadow();var j;if((j=c(this))&&j.isTopmost()){jq(j.$n()).removeClass(j.$s("selected"))}var i=g(this);if(i){i.$class._rmActive(i)}this._curIndex=-1;this.$class._rmActive(this);this._shallSync=null},open:function(k,m,i,j){if(!this.isOpen()){zul.menu._nOpen++}var l;if(l=c(this)){if(!m){k=l.getAnchor_();if(!i){if(l.isTopmost()){i=l.parent.getOrient()=="vertical"?"end_before":"after_start"}else{i="end_before"}}}}this.$super("open",k,m,i,j||{sendOnOpen:true,disableMask:true});this._syncPos()},shallStackup_:function(){return false},setTopmost:function(){this.$supers("setTopmost",arguments);this.zsync()},onFloatUp:function(i,k){if(!this.isVisible()){return}var j=this._openInfo;if(this._shallToggle&&j&&k&&(k.triggerByClick===undefined||(j[3].which==k.triggerByClick&&zUtl.isAncestor(this._openInfo[0],i.origin)))){return}this._doFloatUp(i)},_doFloatUp:function(i){if(!this.isVisible()){return}var l=i.origin;if(this.parent.menupopup==this&&!this.parent.isTopmost()&&!this.parent.$class._isActive(this.parent)){this.close({sendOnOpen:true});return}for(var k,j=l;j;j=j.parent){if(j==this||(j.menupopup==this&&!this._shallClose)){if(!k){this.setTopmost()}return}k=k||j.isFloating_()}if(l&&l.ignoreDescendantFloatUp_(this)){for(var k,j=this;j=j.parent;){if(j==l){if(this._shallClose){break}if(!k){this.setTopmost()}return}k=k||j.isFloating_()}}this.close({sendOnOpen:true})},onShow:function(){this.zsync();var i=this.$n("a");if(i){if(zk(i).isRealVisible()){i.focus();zk.currentFocus=this}}zk(this).redoCSS(-1,{fixFontIcon:true})},onHide:function(){if(this.isOpen()){this.close()}this._hideShadow()},bind_:function(){this.$supers(zul.menu.Menupopup,"bind_",arguments);zWatch.listen({onHide:this,onResponse:this});var i=this.$n();this.domListen_(i,"onMouseEnter").domListen_(i,"onMouseLeave");if(!zk.css3){jq.onzsync(this)}},unbind_:function(){if(this.isOpen()){this.close()}if(this._shadow){this._shadow.destroy()}if(!zk.css3){jq.unzsync(this)}this._shadow=null;zWatch.unlisten({onHide:this,onResponse:this});var i=this.$n();this.domUnlisten_(i,"onMouseEnter").domUnlisten_(i,"onMouseLeave");this.$supers(zul.menu.Menupopup,"unbind_",arguments)},onResponse:function(){if(!this.isOpen()){return}this.zsync();this.$supers("onResponse",arguments);this._syncPos()},doKeyDown_:function(l){var k=g(this),o,n=l.keyCode;switch(n){case 38:case 40:if(k){k.$class._rmActive(k)}k=n==38?a(this,k):d(this,k);if(k){k.$class._addActive(k)}break;case 37:if(k&&k.$instanceof(zul.menu.Menu)&&k._contentHandler&&k._contentHandler.isOpen()){k._contentHandler.onHide()}else{if(((o=c(this)))&&!o.isTopmost()){this.close();o.$class._addActive(o);var j=o.parent;if(j){var m=j.$n("a");if(m){m.focus()}j._curIndex=h(j,o)}}else{var i=f(this);if(i&&(i=i._getPrevVisibleMenu())){b(i)}else{this.close()}}}break;case 39:if(k&&k.$instanceof(zul.menu.Menu)){k._togglePopup()}else{var i=f(this);if(i&&(i=i._getNextVisibleMenu())){b(i)}}break;case 13:if(k&&k.$instanceof(zul.menu.Menuitem)){k.doClick_(new zk.Event(k,"onClick",{}));zWatch.fire("onFloatUp",k);this.close({sendOnOpen:true})}else{if(k&&k.$instanceof(zul.menu.Menu)){k._togglePopup()}else{if((o=c(this))){this.close();if(o.isTopmost()){o.focus()}else{o.$class._addActive(o);var j=o.parent;if(j){var m=j.$n("a");if(m){m.focus()}}}}}}break;case 27:if((o=c(this))){if(o.isTopmost()){this.close();o.focus()}else{if(o._contentHandler&&o._contentHandler.isOpen()){content.onHide()}else{this.close();o.$class._addActive(o);var j=o.parent;if(j){var m=j.$n("a");if(m){m.focus()}}}}}break;case 9:var i=f(this);if(i){i.focus_(undefined,zk.ie<11)}this.close();break}if(n!=9){l.stop()}this.$supers("doKeyDown_",arguments)},getMenubar:function(){for(var i=this.parent;i;i=i.parent){if(i.$instanceof(zul.menu.Menubar)){return i}if(i.$instanceof(zul.menu.Menu)){return i.getMenubar()}break}return null},_doMouseEnter:function(i){var j=this.getMenubar();if(j){j._bOver=true}this._shallClose=false},_doMouseLeave:function(i){var j=this.getMenubar();if(j){j._bOver=false;if(j._autodrop){j._closeOnOut()}}}},{_rmActive:function(i){if(i.parent.$instanceof(zul.menu.Menu)){i.parent.$class._rmActive(i.parent)}}});zul.menu._nOpen=0})();
zkreg('zul.menu.Menupopup');zk._m={};
zk._m['default']=function(c){var d=this.uuid,b=zk.ie<11||zk.gecko?"a":"button";c.push("<div",this.domAttrs_(),"><",b,' id="',d,'-a" tabindex="-1" onclick="return false;" href="javascript:;"',' class="z-focus-a"></',b,'><div class="',this.$s("separator"),'"></div><ul class="',this.$s("content"),'" id="',d,'-cave">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(c)}c.push("</ul></div>")};
;zkmld(zk._p.p.Menupopup,zk._m);
}finally{zk.setLoaded(zk._p.n);}});zk.setLoaded('zul.menu',1);