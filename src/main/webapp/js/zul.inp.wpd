zk.load('zul.wgt,zul.lang,zk.fmt',function(){if(zk._p=zkpi('zul.inp'))try{
(function(){function g(k,j,l){j.start=zk(k.getInputNode()).getSelectionRange()[0];if(l){j.bySelectBack=true}return j}function f(j){h(j);j._tidChg=setTimeout(j.proxy(d),zul.inp.InputWidget.onChangingDelay)}function h(k,j){if(k._tidChg){clearTimeout(k._tidChg);k._tidChg=null}if(j){if((zul.inp.InputWidget.onChangingForced&&k.isListen("onChanging"))||k._instant){d.call(k,-1)}e(k)}}function e(j){j._lastChg=j.valueEnter_=j.valueSel_=null}function d(l){var k=this.getInputNode(),m=this.valueEnter_||k.value;if(this._lastChg!=m){this._lastChg=m;var j=this.valueSel_;this.valueSel_=null;if(this.isListen("onChanging")){this.fire("onChanging",g(this,{value:m},j==m),{ignorable:1,rtags:{onChanging:1}},l||5)}if(this._instant){this.updateChange_()}}}var c=zk.ie<11?function(){return true}:zk.opera?function(j){return j==32||j>46}:function(j){return j>=32},a=zk.ie<11?function(j){setTimeout(function(){if(j==zk.currentFocus){zjq.fixInput(j.getInputNode())}},0)}:zk.$void;var i=windowY=0;zul.inp.RoundUtl={syncWidth:function(n,j,o){var m=n.$n();if((!n._inplace&&!m.style.width)||(!o&&!zk(m).isRealVisible())){return}if(m.style.width){var l=m.offsetWidth,k=j?j.offsetWidth:0;n.getInputNode().style.width=jq.px0(l-k)}},buttonVisible:function(k,j){var m=k.$n("btn");if(m){var l=j?"removeClass":"addClass";jq(m)[l](k.$s("disabled"));jq(k.getInputNode())[l](k.$s("rightedge"));k.onSize()}},doFocus_:function(j){if(j._inplace){j.onSize()}},doBlur_:function(j){if(j._inplace&&j._inplaceout){var k=j.$n();jq(k).addClass(j.getInplaceCSS());j.onSize();if(!j.getHflex()){k.style.width=j.getWidth()||""}}},onSize:function(k){var j=k.getWidth();if(!k.getHflex()&&(!j||j.indexOf("%")!=-1)){k.getInputNode().style.width=""}this.syncWidth(k,k.$n("btn"),true)}};var b=zul.inp.InputWidget=zk.$extends(zul.Widget,{_maxlength:0,_cols:0,_type:"text",_placeholder:null,setName:(function(j,k){return function(l,m){var n=this[j];this[j]=l;if(n!==l||(m&&m.force)){this.__fname__=j.substring(1);k.apply(this,arguments);delete this.__fname__}return this}})("_name",(function(j){var k=this.getInputNode();if(k){k.name=j}})),getName:_zkf$=function(){return this._name},isName:_zkf$,setDisabled:(function(j,k){return function(l,m){var n=this[j];this[j]=l;if(n!==l||(m&&m.force)){this.__fname__=j.substring(1);k.apply(this,arguments);delete this.__fname__}return this}})("_disabled",(function(j){var k=this.getInputNode();if(k){k.disabled=j;var l=j?"addClass":"removeClass";jq(this.$n())[l](this.$s("disabled"))}})),getDisabled:_zkf$=function(){return this._disabled},isDisabled:_zkf$,setReadonly:(function(j,k){return function(l,m){var n=this[j];this[j]=l;if(n!==l||(m&&m.force)){this.__fname__=j.substring(1);k.apply(this,arguments);delete this.__fname__}return this}})("_readonly",(function(j){var k=this.getInputNode();if(k){a(this);var l=j?"addClass":"removeClass";k.readOnly=j;jq(this.$n())[l](this.$s("readonly"))}})),getReadonly:_zkf$=function(){return this._readonly},isReadonly:_zkf$,setCols:(function(j,k){return function(l,m){var n=this[j];this[j]=l;if(n!==l||(m&&m.force)){this.__fname__=j.substring(1);k.apply(this,arguments);delete this.__fname__}return this}})("_cols",(function(k){var j=this.getInputNode();if(j){if(this.isMultiline()){j.cols=k}else{j.size=k}}})),getCols:_zkf$=function(){return this._cols},isCols:_zkf$,setMaxlength:(function(j,k){return function(l,m){var n=this[j];this[j]=l;if(n!==l||(m&&m.force)){this.__fname__=j.substring(1);k.apply(this,arguments);delete this.__fname__}return this}})("_maxlength",(function(j){var k=this.getInputNode();if(k&&!this.isMultiline()){k.maxLength=j}})),getMaxlength:_zkf$=function(){return this._maxlength},isMaxlength:_zkf$,setTabindex:(function(j,k){return function(l,m){var n=this[j];this[j]=l;if(n!==l||(m&&m.force)){this.__fname__=j.substring(1);k.apply(this,arguments);delete this.__fname__}return this}})("_tabindex",(function(j){var k=this.getInputNode();if(k){k.tabIndex=j||""}})),getTabindex:_zkf$=function(){return this._tabindex},isTabindex:_zkf$,setInplace:(function(j,k){return function(l,m){var n=this[j];this[j]=l;if(n!==l||(m&&m.force)){this.__fname__=j.substring(1);k.apply(this,arguments);delete this.__fname__}return this}})("_inplace",(function(j){this.rerender()})),getInplace:_zkf$=function(){return this._inplace},isInplace:_zkf$,setPlaceholder:(function(j,k){return function(l,m){var n=this[j];this[j]=l;if(n!==l||(m&&m.force)){this.__fname__=j.substring(1);k.apply(this,arguments);delete this.__fname__}return this}})("_placeholder",(function(j){this.rerender()})),getPlaceholder:_zkf$=function(){return this._placeholder},isPlaceholder:_zkf$,setInstant:(function(j){return function(k){this[j]=k;return this}})("_instant"),getInstant:_zkf$=function(){return this._instant},isInstant:_zkf$,getInplaceCSS:function(){return this._inplace?this.$s("inplace"):""},select:function(l,j){var k=this.getInputNode();if(zk.ff&&zk.currentFocus!=k){this.focus_()}zk(k).setSelectionRange(l,j)},getType:function(){return this._type},isMultiline:function(){return false},inRoundedMold:function(){return true},getText:function(){return this.coerceToString_(this.getValue())},setText:function(j){this.setValue(this.coerceFromString_(j))},getValue:function(){return this._value},setValue:function(l,j){var m;if(j){this.clearErrorMessage(this.cst!=null)}else{m=this._validate(l);l=m.value}e(this);if((!m||!m.error)&&(j||!this._equalValue(this._value,l))){this._value=l;var k=this.getInputNode();if(k){this._defRawVal=this._lastChg=k.value=l=this.coerceToString_(l)}}},set_value:function(k,j){this.setValue(this.unmarshall_(k),j)},getInputNode:_zkf=function(){return this.$n("real")||this.$n()},getTextNode:_zkf,domAttrs_:function(k){var j=this.$supers("domAttrs_",arguments);if(!k||!k.text){j+=this.textAttrs_()}return j},textAttrs_:function(){var k="",j;if(this.isMultiline()){j=this._cols;if(j>0){k+=' cols="'+j+'"'}}else{k+=' value="'+this._areaText()+'"';k+=' type="'+this.getType()+'"';j=this._cols;if(j>0){k+=' size="'+j+'"'}j=this._maxlength;if(j>0){k+=' maxlength="'+j+'"'}}j=this._tabindex;if(j){k+=' tabindex="'+j+'"'}j=this._name;if(j){k+=' name="'+j+'"'}if(this._disabled){k+=' disabled="disabled"'}if(this._readonly){k+=' readonly="readonly"'}if(this._placeholder){k+=' placeholder="'+zUtl.encodeXML(this._placeholder)+'"'}var l=jq.filterTextStyle(this.domStyle_({width:true,height:true,top:true,left:true}));if(l){k+=' style="'+l+'"'}return k},_onChanging:d,_areaText:function(){return zUtl.encodeXML(this.coerceToString_(this._value))},setConstraint:function(j){if(typeof j=="string"&&j.charAt(0)!="["){this._cst=new zul.inp.SimpleConstraint(j)}else{this._cst=j}if(this._cst){this._reVald=true}},getConstraint:function(){return this._cst},doMouseOut_:function(){this._inplaceout=true;this.$supers("doMouseOut_",arguments)},doMouseOver_:function(){this._inplaceout=false;this.$supers("doMouseOver_",arguments)},doFocus_:function(k){this.$supers("doFocus_",arguments);var m=this.getInputNode();this._lastChg=m.value;if(k.domTarget.tagName){if(this._inplace){jq(this.$n()).removeClass(this.getInplaceCSS());if(!this._inplaceout){this._inplaceout=true}}if(this._errbox){var l=this,j=l._cst&&l._cst._pos;setTimeout(function(){if(l._errbox){l._errbox.open(l,null,j||"end_before",{dodgeRef:!j})}})}}},doBlur_:function(k){h(this,true);if(!zk.alerting&&this.shallUpdate_(zk.currentFocus)){this.updateChange_();this.$supers("doBlur_",arguments)}if(this._inplace&&this._inplaceout){jq(this.$n()).addClass(this.getInplaceCSS())}if(zk.ios&&jq(this.$n()).data("fixscrollposition")){var j=window.pageXOffset,l=window.pageYOffset;if(j!=i||l!=windowY){window.scrollTo(i,windowY)}}},_doTouch:zk.ios?function(j){i=window.pageXOffset;windowY=window.pageYOffset}:zk.$void,_doSelect:function(k){if(this.isListen("onSelection")){var m=this.getInputNode(),l=zk(m).getSelectionRange(),j=l[0],n=l[1];this.fire("onSelection",{start:j,end:n,selected:m.value.substring(j,n)})}},shallUpdate_:function(j){return !j||!zUtl.isAncestor(this,j)},getErrorMesssage:function(){return this.getErrorMessage()},getErrorMessage:function(){return this._errmsg},setErrorMessage:function(j){this.clearErrorMessage(true,true);this._markError(j,null,true)},clearErrorMessage:function(l,k){var j=this._errbox;if(j){this._errbox=null;j.destroy()}if(!k){this._errmsg=null;jq(this.getInputNode()).removeClass(this.$s("invalid"))}if(l){this._reVald=true}},coerceFromString_:function(j){return j},coerceToString_:function(j){return j||""},_markError:function(n,m,l){this._errmsg=n;if(this.desktop){jq(this.getInputNode()).addClass(this.$s("invalid"));var j=this._cst,k;if(j!="[c"){if(j&&(k=j.showCustomError)){k=k.call(j,this,n)}if(!k){this._errbox=this.showError_(n)}}if(!l){this.fire("onError",{value:m,message:n})}}},validate_:function(l){var j;if(j=this._cst){if(typeof j=="string"){return false}var k=j.validate(this,l);if(!k&&j.serverValidate){return false}return k}},_validate:function(k){zul.inp.validating=true;try{var m=k,l;if(typeof m=="string"||m==null){m=this.coerceFromString_(m);if(m&&((l=m.error)||m.server)){this.clearErrorMessage(true);if(m.server||this._cst=="[c"){this._reVald=false;return{rawValue:k||"",server:true}}this._markError(l,m);return m}}if(!this.desktop){this._errmsg=null}else{var j=this._errmsg;this.clearErrorMessage(true);l=this.validate_(m);if(l===false){this._reVald=false;return{value:m,server:true}}if(l){this._markError(l,m);return{error:l}}this._reVald=false;if(j){this.fire("onError",{value:m})}}return{value:m}}finally{zul.inp.validating=false}},_shallIgnore:function(j,l){if(zk.mac&&j.metaKey){return}else{var k=(zk.ie<11||zk.opera)?j.keyCode:j.charCode;if(!j.altKey&&!j.ctrlKey&&c(k)&&l.indexOf(String.fromCharCode(k))<0){j.stop();return true}}},showError_:function(k){var j=new zul.inp.Errorbox(this,k);j.show();return j},_equalValue:function(k,j){return k==j||this.marshall_(k)==this.marshall_(j)},marshall_:function(j){return j},unmarshall_:function(j){return j},updateChange_:function(){if(zul.inp.validating){return false}var k=this.getInputNode(),n=k.value;if(!this._reVald&&n==this._defRawVal){return false}var j=this._errmsg,o=this._validate(n);if(!o.error||o.server){var m,l;if(o.rawValue!=null){l={rawValue:o.rawValue}}else{if(!o.error){n=this.coerceToString_(o.value);if(k.value!==n){k.value=n}this._reVald=false;m=j||!this._equalValue(o.value,this._value);if(m){this._value=o.value;this._defRawVal=n}}}if(m||o.server){this.fire("onChange",g(this,l!=null?l:{value:this.marshall_(o.value)}),o.server?{toServer:true}:null,90)}}return true},fireOnChange:function(j){this.fire("onChange",g(this,{value:this.marshall_(this.getValue())}),j)},_resetForm:function(){var j=this.getInputNode();if(j.value!=j.defaultValue){var k=this;setTimeout(function(){k.updateChange_()},0)}},focus_:function(j){if(zk.ie11_&&!j){j=0}zk(this.getInputNode()).focus(j);return true},domClass_:function(k){var j=this.$supers("domClass_",arguments);if((!k||!k.zclass)&&this._disabled){j+=" "+this.$s("disabled")}if((!k||!k.input)&&this._inplace){j+=" "+this.getInplaceCSS()}if((!k||!k.zclass)&&this._readonly){j+=" "+this.$s("readonly")}return j},bind_:function(){this.$supers(b,"bind_",arguments);var j=this.getInputNode();this._defRawVal=j.value;this.domListen_(j,"onFocus","doFocus_").domListen_(j,"onBlur","doBlur_").domListen_(j,"onSelect");if(zk.ios){this.domListen_(j,"onTouchStart","_doTouch")}if(j=j.form){jq(j).bind("reset",this.proxy(this._resetForm))}},unbind_:function(){this.clearErrorMessage(true);var j=this.getInputNode();this.domUnlisten_(j,"onFocus","doFocus_").domUnlisten_(j,"onBlur","doBlur_").domUnlisten_(j,"onSelect");if(zk.ios){this.domUnlisten_(j,"onTouchStart","_doTouch")}if(j=j.form){jq(j).unbind("reset",this.proxy(this._resetForm))}this.$supers(b,"unbind_",arguments)},resetSize_:function(j){var k;if(this.$n()!=(k=this.getInputNode())){k.style[j=="w"?"width":"height"]=""}this.$supers("resetSize_",arguments)},doKeyDown_:function(j){var n=j.keyCode;if(this._readonly&&n==8&&j.target==this){j.stop();return}if(!this._inplaceout){this._inplaceout=n==9}if(n==9&&!j.altKey&&!j.ctrlKey&&!j.shiftKey&&this._tabbable){var l=this.getInputNode(),m=zk(l),k=m.getSelectionRange(),o=l.value;o=o.substring(0,k[0])+"\t"+o.substring(k[1]);l.value=o;o=k[0]+1;m.setSelectionRange(o,o);j.stop();return}h(this);this.$supers("doKeyDown_",arguments)},doKeyUp_:function(){if(this.isMultiline()){var j=this._maxlength;if(j>0){var k=this.getInputNode(),l=k.value;if(l!=this._defRawVal&&l.length>j){k.value=l.substring(0,j)}}}if(this.isListen("onChanging")||this._instant){f(this)}this.$supers("doKeyUp_",arguments)},afterKeyDown_:function(j,k){if(!k&&this._inplace){if(!this._multiline&&j.keyCode==13){var m=jq(this.getInputNode()),l=this.getInplaceCSS();if(m.toggleClass(l).hasClass(l)){m.zk.setSelectionRange(0,m[0].value.length)}}else{jq(this.getInputNode()).removeClass(this.getInplaceCSS())}}if(j.keyCode!=13||!this.isMultiline()){return this.$supers("afterKeyDown_",arguments)}},beforeCtrlKeys_:function(j){this.updateChange_()}},{onChangingDelay:350,onChangingForced:true,_isInView:function(m){var q=m.desktop,l=m.parent,o=m.getInputNode(),k=null,j=true;if(!zk.ie8_){while(l&&l!=q){k=l._scrollbar;if(k&&(k.hasVScroll()||k.hasHScroll())){j=k.isScrollIntoView(o);if(!j){return j}}k=null;l=l.parent}}return j&&zk(o).isScrollIntoView(true)}});zul.inp.InputCtrl={isPreservedFocus:function(j){return true},isPreservedMouseMove:function(j){return true},isIgnoredDragForErrorbox:function(k,l,j){var m=k.control.$n("c");return j.domTarget==m&&jq(m).hasClass("z-errbox-close-over")}}})();
(function(){var a={u:"up",d:"down",l:"left",r:"right"};zul.inp.Errorbox=zk.$extends(zul.wgt.Notification,{$init:function(b,c){this.parent=b;this.parent.__ebox=this;this.msg=c;this.$supers("$init",[c,{ref:parent}])},show:function(){jq(document.body).append(this);var b=this.parent._cst&&this.parent._cst._pos;var c=this,b=this.parent._cst&&this.parent._cst._pos;setTimeout(function(){if(c.parent&&zul.inp.InputWidget._isInView(c)){c.open(c.parent,null,b||"end_before",{dodgeRef:!b})}},50);zWatch.listen({onHide:[this.parent,this.onParentHide]})},destroy:function(){if(this.parent){zWatch.unlisten({onHide:[this.parent,this.onParentHide]});delete this.parent.__ebox}this.close();this.unbind();jq(this).remove();this.parent=null},onParentHide:function(){if(this.__ebox){this.__ebox.setFloating_(false);this.__ebox.close()}},bind_:function(){this.$supers(zul.inp.Errorbox,"bind_",arguments);var b=zul.inp.Errorbox;this._drag=new zk.Draggable(this,null,{starteffect:zk.$void,endeffect:b._enddrag,ignoredrag:b._ignoredrag,change:b._change});zWatch.listen({onScroll:this})},unbind_:function(){var b=this._drag;this._drag=null;if(b){b.destroy()}zWatch.unlisten({onScroll:this});if(this.parent){zWatch.unlisten({onHide:[this.parent,this.onParentHide]})}this.$supers(zul.inp.Errorbox,"unbind_",arguments)},getInputNode:function(){return this.parent?this.parent.$n():null},onScroll:function(b){if(b){if(zul.inp.InputWidget._isInView(this)){if(!this.isOpen()){this.open()}this.position(this.parent,null,"end_before",{overflow:true});this._fixarrow()}else{this.close()}}},setDomVisible_:function(c,d){this.$supers("setDomVisible_",arguments);var b=this._stackup;if(b){b.style.display=d?"":"none"}},doClick_:function(b){var c=b.domTarget;if(jq.contains(this.$n("cls"),c)){if((c=this.parent)&&c.clearErrorMessage){c.clearErrorMessage(true,true);c.focus(0)}else{zAu.wrongValue_(c,false)}}else{this.$supers("doClick_",arguments);this.parent.focus(0)}},open:function(){this.$supers("open",arguments);this.setTopmost();this._fixarrow()},afterCloseAnima_:function(b){this.setVisible(false);this.setFloating_(false);if(b&&b.sendOnOpen){this.fire("onOpen",{open:false})}},redraw:function(b){var d=this.uuid,c=this.$s("icon");b.push("<div",this.domAttrs_(),'><div id="',d,'-p" class="',this.$s("pointer"),'"></div><i id="',d,'-icon" class="',c,' z-icon-exclamation-triangle"></i><div id="',d,'-cave" class="',this.$s("content"),'" title="',(zUtl.encodeXML(msgzk.GOTO_ERROR_FIELD)),'">',zUtl.encodeXML(this.msg,{multiline:true}),'</div><div id="',d,'-cls" class="',this.$s("close"),'"><i class="',c,' z-icon-times"></i></div></div>')},onFloatUp:function(b){var e=b.origin;if(e==this){this.setTopmost();return}if(!e||e==this.parent||!this.isVisible()){return}var d=this,c=e;while((d=d.parent)&&!d.isFloating_()){if(d==e){return}}for(;c&&!c.isFloating_();c=c.parent){}if(d==c){var f=e.$n();if(f){this._uncover(f)}}},_uncover:function(b){var i=zk(b).cmOffset(),f=this.$n(),d=zk(f).cmOffset();if(jq.isOverlapped(i,[b.offsetWidth,b.offsetHeight],d,[f.offsetWidth,f.offsetHeight])){var k=this.parent.$n(),j;var h=zk(k).cmOffset(),e=k.offsetHeight,c=h[1]+e;j=i[1]+b.offsetHeight<=c?c:h[1]-f.offsetHeight;var g=zk(f).toStyleOffset(0,j);f.style.top=g[1]+"px";this._fixarrow()}},_fixarrow:function(){var i=this.parent.$n(),e=this.$n(),c=this.$n("p"),g=zk(i).revisedOffset(),d=zk(e).revisedOffset(),m=d[0]-g[0],k=d[1]-g[1],f,l=e.style;pw=2+(zk(c).borderWidth()/2)||0,ph=2+(zk(c).borderHeight()/2)||0;if(m>=i.offsetWidth-pw){f=k<ph-e.offsetHeight?"ld":k>=i.offsetHeight-ph?"lu":"l"}else{if(m<pw-e.offsetWidth){f=k<ph-e.offsetHeight?"rd":k>=i.offsetHeight-ph?"ru":"r"}else{f=k<0?"d":"u"}}e.style.padding="0";if(f=="d"||f=="u"){var h=(Math.max(m,0)+Math.min(e.offsetWidth+m,i.offsetWidth))/2-m-6,j=e.offsetWidth-11;c.style.left=(h>j?j:h<1?1:h)+"px";if(f=="d"){c.style.top=null;c.style.bottom="-4px";l.paddingBottom=ph+"px"}else{c.style.top="-4px";l.paddingTop=ph+"px"}}else{if(f=="l"||f=="r"){var h=(Math.max(k,0)+Math.min(e.offsetHeight+k,i.offsetHeight))/2-k-6,j=e.offsetHeight-11;c.style.top=(h>j?j:h<1?1:h)+"px";if(f=="r"){c.style.left=null;c.style.right="-4px";l.paddingRight=pw+"px"}else{c.style.left="-4px";l.paddingLeft=pw+"px"}}else{var b=c.style;b.left=b.top=b.right=b.bottom=null;switch(f){case"lu":b.left="0px";b.top="-4px";l.paddingTop=ph+"px";break;case"ld":b.left="0px";b.bottom="-4px";l.paddingBottom=ph+"px";break;case"ru":b.right="0px";b.top="-4px";l.paddingTop=ph+"px";break;case"rd":b.right="0px";b.bottom="-4px";l.paddingBottom=ph+"px";break}f=f=="ru"||f=="lu"?"u":"d"}}c.className=this.$s("pointer")+(a[f]?" "+this.$s(a[f]):"");jq(c).show()}},{_enddrag:function(c){var b=c.control;b.setTopmost();b._fixarrow()},_ignoredrag:function(c,d,b){return zul.inp.InputCtrl.isIgnoredDragForErrorbox(c,d,b)},_change:function(e){var d=e.control,b=d._stackup,c=d.$n();if(b){b.style.top=c.style.top;b.style.left=c.style.left}d._fixarrow();if(zk.mobile){zk(c).redoCSS()}}})})();
zkreg('zul.inp.Errorbox');(function(){var a=["before_start","before_end","end_before","end_after","after_end","after_start","start_after","start_before","overlap","overlap_end","overlap_before","overlap_after","at_pointer","after_pointer"];zul.inp.SimpleConstraint=zk.$extends(zk.Object,{$init:function(e,d,f){if(typeof e=="string"){this._flags={};this._init(e)}else{this._flags=typeof e=="number"?this._cvtNum(e):e||{};this._regex=typeof d=="string"?new RegExp(d):d;this._errmsg=f;if(this._flags.SERVER){this.serverValidate=true}}},_init:function(e){l_out:for(var d=0,c=0,b=e.length;c>=0;d=c+1){for(;;++d){if(d>=b){return}var g=e.charAt(d);if(g=="/"){for(c=++d;;++c){if(c>=b){c=-1;break}g=e.charAt(c);if(g=="/"){break}if(g=="\\"){++c}}this._regex=new RegExp(c>=0?e.substring(d,c):e.substring(d),"g");continue l_out}if(g==":"){this._errmsg=e.substring(d+1).trim();return}if(!zUtl.isChar(g,{whitespace:1})){break}}var f;for(c=d;;++c){if(c>=b){f=e.substring(d);c=-1;break}var g=e.charAt(c);if(g==","||g==":"||g==";"||g=="/"){if(this._regex&&d==c){d++;continue}f=e.substring(d,c);if(g==":"||g=="/"){--c}break}}this.parseConstraint_(f.trim().toLowerCase())}},getFlags:function(){return this._flags},parseConstraint_:function(b){var c=this._flags;if(b=="no positive"){c.NO_POSITIVE=true}else{if(b=="no negative"){c.NO_NEGATIVE=true}else{if(b=="no zero"){c.NO_ZERO=true}else{if(b=="no empty"){c.NO_EMPTY=true}else{if(b=="no future"){c.NO_FUTURE=true}else{if(b=="no past"){c.NO_PAST=true}else{if(b=="no today"){c.NO_TODAY=true}else{if(b=="strict"){c.STRICT=true}else{if(b=="server"){c.SERVER=true;this.serverValidate=true}else{if(b&&a.$contains(b)){this._pos=b}else{if(zk.debugJS){zk.error("Unknown constraint: "+b)}}}}}}}}}}}},_cvtNum:function(b){var c={};if(b&1){c.NO_POSITIVE=c.NO_FUTURE=true}if(b&2){c.NO_NEGATIVE=c.NO_PAST=true}if(b&4){c.NO_ZERO=c.NO_TODAY=true}if(b&256){c.NO_EMPTY=true}if(b&512){c.STRICT=true}if(b=(b&61440)){this._pos=a[b>>12]}return c},_cvtNum:function(b){var c={};if(b&1){c.NO_POSITIVE=c.NO_FUTURE=true}if(b&2){c.NO_NEGATIVE=c.NO_PAST=true}if(b&4){c.NO_ZERO=c.NO_TODAY=true}if(b&256){c.NO_EMPTY=true}if(b&512){c.STRICT=true}return c},validate:function(i,h){var e=this._flags,g=this._errmsg;if(h&&h.$toNumber){h=h.$toNumber()}switch(typeof h){case"string":if(e.NO_EMPTY&&(!h||!h.trim())){return g||msgzul.EMPTY_NOT_ALLOWED}var d=this._regex;if(d){var c=h.match(d);if(!c||c.join("")!=h){return g||msgzul.ILLEGAL_VALUE}}if(e.STRICT&&h&&i.validateStrict){g=i.validateStrict(h);if(g){return g}}return;case"number":if(h>0){if(e.NO_POSITIVE){return g||this._msgNumDenied()}}else{if(h==0){if(e.NO_ZERO){return g||this._msgNumDenied()}}else{if(e.NO_NEGATIVE){return g||this._msgNumDenied()}}}return}if(h&&h.getFullYear){var b=zUtl.today(),h=new Date(h.getFullYear(),h.getMonth(),h.getDate());if((b-h)/86400000<0){if(e.NO_FUTURE){return g||this._msgDateDenied()}}else{if(h-b==0){if(e.NO_TODAY){return g||this._msgDateDenied()}}else{if(e.NO_PAST){return g||this._msgDateDenied()}}}return}if(!h&&e.NO_EMPTY){return g||msgzul.EMPTY_NOT_ALLOWED}},_msgNumDenied:function(){var b=this._flags,c=this._errmsg;if(b.NO_POSITIVE){return c||(b.NO_ZERO?b.NO_NEGATIVE?msgzul.NO_POSITIVE_NEGATIVE_ZERO:msgzul.NO_POSITIVE_ZERO:b.NO_NEGATIVE?msgzul.NO_POSITIVE_NEGATIVE:msgzul.NO_POSITIVE)}else{if(b.NO_NEGATIVE){return c||(b.NO_ZERO?msgzul.NO_NEGATIVE_ZERO:msgzul.NO_NEGATIVE)}else{if(b.NO_ZERO){return c||msgzul.NO_ZERO}}}return c||msgzul.ILLEGAL_VALUE},_msgDateDenied:function(){var b=this._flags,c=this._errmsg;if(b.NO_FUTURE){return c||(b.NO_TODAY?b.NO_PAST?NO_FUTURE_PAST_TODAY:msgzul.NO_FUTURE_TODAY:b.NO_PAST?msgzul.NO_FUTURE_PAST:msgzul.NO_FUTURE)}else{if(b.NO_PAST){return c||(b.NO_TODAY?msgzul.NO_PAST_TODAY:msgzul.NO_PAST)}else{if(b.NO_TODAY){return c||msgzul.NO_TODAY}}}return c||msgzul.ILLEGAL_VALUE}})})();
zul.inp.SimpleSpinnerConstraint=zk.$extends(zul.inp.SimpleConstraint,{setMin:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_min",(_zkf=function(){})),getMin:_zkf$=function(){return this._min},isMin:_zkf$,setMax:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_max",(_zkf)),getMax:_zkf$=function(){return this._max},isMax:_zkf$,parseConstraint_:function(c){var e=c.replace(/ +/g," ").split(/[, ]/),b=e.length,a;for(var d=0;d<b+1;d++){if(e[d]=="min"){this._min=e[++d]*1;a=true}else{if(e[d]=="max"){this._max=e[++d]*1;a=true}}}if(a){return}else{return this.$supers("parseConstraint_",arguments)}},validate:function(c,b){switch(typeof b){case"number":if((this._max&&b>this._max)||(this._min&&b<this._min)){var d=this._errmsg,a=d?d:msgzul.OUT_OF_RANGE+": "+(this._min!=null?this._max!=null?this._min+" - "+this._max:">= "+this._min:"<= "+this._max)}}return a||this.$supers("validate",arguments)}});
zul.inp.SimpleDoubleSpinnerConstraint=zk.$extends(zul.inp.SimpleConstraint,{setMin:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_min",(_zkf=function(){})),getMin:_zkf$=function(){return this._min},isMin:_zkf$,setMax:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_max",(_zkf)),getMax:_zkf$=function(){return this._max},isMax:_zkf$,parseConstraint_:function(c){var e=c.replace(/ +/g," ").split(/[, ]/),b=e.length,a;for(var d=0;d<b+1;d++){if(e[d]=="min"){this._min=e[++d]*1;a=true}else{if(e[d]=="max"){this._max=e[++d]*1;a=true}}}if(a){return}else{return this.$supers("parseConstraint_",arguments)}},validate:function(c,b){switch(typeof b){case"number":if((this._max&&b>this._max)||(this._min&&b<this._min)){var a=msgzul.OUT_OF_RANGE+": ";a+="("+this._min!=null?this._max!=null?this._min+" ~ "+this._max:">= "+this._min:"<= "+this._max+")"}}if(a){return a}else{return this.$supers("validate",arguments)}}});
zul.inp.SimpleDateConstraint=zk.$extends(zul.inp.SimpleConstraint,{$init:function(b,c){this.$super("$init",b);this._localizedSymbols=c._localizedSymbols},format:"yyyyMMdd",parseConstraint_:function(c){var a=this.format.length+1;if(c.startsWith("between")){var b=c.indexOf("and",7);if(b<0&&zk.debugJS){zk.error("Unknown constraint: "+c)}this._beg=new zk.fmt.Calendar(null,this._localizedSymbols).parseDate(c.substring(7,b),this.format);this._end=new zk.fmt.Calendar(null,this._localizedSymbols).parseDate(c.substring(b+3,b+3+a),this.format);if(this._beg.getTime()>this._end.getTime()){var e=this._beg;this._beg=this._end;this._end=e}this._beg.setHours(0,0,0,0);this._end.setHours(0,0,0,0);return}else{if(c.startsWith("before")&&!c.startsWith("before_")){this._end=new zk.fmt.Calendar(null,this._localizedSymbols).parseDate(c.substring(6,6+a),this.format);this._end.setHours(0,0,0,0);return}else{if(c.startsWith("after")&&!c.startsWith("after_")){this._beg=new zk.fmt.Calendar(null,this._localizedSymbols).parseDate(c.substring(5,5+a),this.format);this._beg.setHours(0,0,0,0);return}}}return this.$supers("parseConstraint_",arguments)},validate:function(d,c){if(jq.type(c)=="date"){var b=this._errmsg;var a=new Date(c.getFullYear(),c.getMonth(),c.getDate());if(this._beg!=null&&this._beg.getTime()>a.getTime()){return b||this.outOfRangeValue()}if(this._end!=null&&this._end.getTime()<a.getTime()){return b||this.outOfRangeValue()}}return this.$supers("validate",arguments)},outOfRangeValue:function(){return msgzul.OUT_OF_RANGE+": "+(this._beg!=null?this._end!=null?new zk.fmt.Calendar(null,this._localizedSymbols).formatDate(this._beg,this.format)+" ~ "+new zk.fmt.Calendar().formatDate(this._end,this.format):">= "+new zk.fmt.Calendar().formatDate(this._beg,this.format):"<= "+new zk.fmt.Calendar().formatDate(this._end,this.format))}});
zul.inp.Textbox=zk.$extends(zul.inp.InputWidget,{_value:"",_rows:1,setMultiline:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_multiline",(function(){this.rerender()})),getMultiline:_zkf$=function(){return this._multiline},isMultiline:_zkf$,setTabbable:(function(a){return function(b){this[a]=b;return this}})("_tabbable"),getTabbable:_zkf$=function(){return this._tabbable},isTabbable:_zkf$,setRows:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_rows",(function(a){var b=this.getInputNode();if(b&&this.isMultiline()){b.rows=a}})),getRows:_zkf$=function(){return this._rows},isRows:_zkf$,setType:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_type",(zk.ie<11?function(){this.rerender()}:function(a){var b=this.getInputNode();if(b){b.type=a}})),getType:_zkf$=function(){return this._type},isType:_zkf$,textAttrs_:function(){var a=this.$supers("textAttrs_",arguments);if(this._multiline){a+=' rows="'+this._rows+'"'}return a}});
zkreg('zul.inp.Textbox');zk._m={};
zk._m['rounded']=function(a){var b=this.uuid;if(this.isMultiline()){a.push("<textarea",this.domAttrs_(),">\n",this._areaText(),"</textarea>")}else{a.push("<input",this.domAttrs_(),"/>")}};
;zk._m['default']=[zk._p.p.Textbox,'rounded'];zkmld(zk._p.p.Textbox,zk._m);zul.inp.FormatWidget=zk.$extends(zul.inp.InputWidget,{setFormat:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_format",(function(){var a=this.getInputNode();if(a){a.value=this.coerceToString_(this._value)}})),getFormat:_zkf$=function(){return this._format},isFormat:_zkf$,doFocus_:function(a){this.$supers("doFocus_",arguments);if(this._shortcut){this.getInputNode().value=this._shortcut}},updateChange_:function(a){var b=this.$supers("updateChange_",arguments);if(a){delete this._shortcut}return b}});
(function(){var a,b={};zk.load("zul.lang",function(){a="0123456789"+zk.MINUS+zk.PERCENT+(zk.groupingDenied?"":zk.GROUPING)});zul.inp.NumberInputWidget=zk.$extends(zul.inp.FormatWidget,{setRounding:(function(c){return function(d){this[c]=d;return this}})("_rounding"),getRounding:_zkf$=function(){return this._rounding},isRounding:_zkf$,setLocalizedSymbols:(function(c,d,e){return function(f,g){var h=this[c];this.__fname__=c.substring(1);this[c]=f=d.apply(this,arguments);if(h!==f||(g&&g.force)){e.apply(this,arguments)}delete this.__fname__;return this}})("_localizedSymbols",(function(d){if(d){var c=jq.evalJSON(d);if(!b[c[0]]){b[c[0]]=c[1]}return b[c[0]]}return d}),(function(){var c=this._localizedSymbols;this._allowKeys=c?"0123456789"+c.MINUS+c.PERCENT+(zk.groupingDenied?"":c.GROUPING):null;this.rerender()})),getLocalizedSymbols:_zkf$=function(){return this._localizedSymbols},isLocalizedSymbols:_zkf$,getAllowedKeys_:function(){return this._allowKeys||a},doKeyPress_:function(c){if(c.ctrlKey&&c.altKey){c.stop()}if(!this._shallIgnore(c,this.getAllowedKeys_())){this.$supers("doKeyPress_",arguments)}},getType:function(){return zk.mobile&&!this._format&&!this._locale?"number":this._type}})})();
zul.inp.Intbox=zk.$extends(zul.inp.NumberInputWidget,{intValue:function(){return this.$supers("getValue",arguments)},coerceFromString_:function(b){if(!b){return null}var c=zk.fmt.Number.unformat(this._format,b,false,this._localizedSymbols),d=parseInt(c.raw,10),a;if(c.raw.length<17){a=d.toString()}else{a=new zk.BigDecimal(c.raw).$toString()}if(isNaN(d)||(c.raw!=a&&c.raw!="-"+a)){return{error:zk.fmt.Text.format(msgzul.INTEGER_REQUIRED,b)}}if(d>2147483647||d<-2147483648){return{error:zk.fmt.Text.format(msgzul.OUT_OF_RANGE+"(−2147483648 - 2147483647)")}}if(c.divscale){d=Math.round(d/Math.pow(10,c.divscale))}return d},coerceToString_:function(b){var a=this._format;return a?zk.fmt.Number.format(a,b,this._rounding,this._localizedSymbols):b!=null?""+b:""}});
zkreg('zul.inp.Intbox');zk._m={};
zk._m['rounded']=function(a){a.push("<input",this.domAttrs_(),"/>")};
;zk._m['default']=[zk._p.p.Intbox,'rounded'];zkmld(zk._p.p.Intbox,zk._m);zul.inp.Longbox=zk.$extends(zul.inp.NumberInputWidget,{coerceFromString_:function(b){if(!b){return null}var c=zk.fmt.Number.unformat(this._format,b,false,this._localizedSymbols),d=new zk.Long(c.raw),a=d.$toString();if(c.raw!=a&&c.raw!="-"+a){return{error:zk.fmt.Text.format(msgzul.INTEGER_REQUIRED,b)}}if(c.divscale){d.scale(-c.divscale)}if(this._isOutRange(d.$toString())){return{error:zk.fmt.Text.format(msgzul.OUT_OF_RANGE+"(−9223372036854775808 - 9223372036854775807)")}}return d},coerceToString_:function(b){var a=this._format;return b!=null?typeof b=="string"?b:a?zk.fmt.Number.format(a,b.$toString(),this._rounding,this._localizedSymbols):b.$toLocaleString():""},_isOutRange:function(d){var c=d.charAt(0)=="-";if(c){d=d.substring(1)}if(d.length>19){return true}if(d.length<19){return false}var b=c?"9223372036854775808":"9223372036854775807";for(var a=0;a<19;++a){if(d.charAt(a)>b.charAt(a)){return true}if(d.charAt(a)<b.charAt(a)){return false}}return false},marshall_:function(a){return a?a.$toString():a},unmarshall_:function(a){return a?new zk.Long(a):a}});
zkreg('zul.inp.Longbox');zk._m={};
zk._m['rounded']=[zk._p.p.Intbox,'rounded'];zk._m['default']=[zk._p.p.Intbox,'rounded'];zkmld(zk._p.p.Longbox,zk._m);zul.inp.Doublebox=zk.$extends(zul.inp.NumberInputWidget,{coerceFromString_:function(i){if(!i){return null}var c=zk.fmt.Number.unformat(this._format,i,false,this._localizedSymbols),j=c.raw,b=parseFloat(j),d=""+b,h=d.indexOf("."),f=j.indexOf(".");if(isNaN(b)||d.indexOf("e")<0){if(f==0){j="0"+j;++f}if(f>=0&&j.substring(j.substring(f+1))&&h<0){h=d.length;d+="."}var e=j.length,a=d.length;if(h>=0&&h<f){a-=h;e-=f;for(var g=f-h;g-->0;){d="0"+d}}if(a<e){for(var g=e-a;g-->0;){d+="0"}}if(isNaN(b)||(j!=d&&j!="-"+d&&j.indexOf("e")<0)){if(!isNaN(b)&&j!=d){return{error:zk.fmt.Text.format(msgzul.ILLEGAL_VALUE)}}return{error:zk.fmt.Text.format(msgzul.NUMBER_REQUIRED,i)}}}if(this._rounding==7&&(this._errmsg||zk.fmt.Number.isRoundingRequired(i,this.getFormat(),this._localizedSymbols))){return{server:true}}if(c.divscale){b=b/Math.pow(10,c.divscale)}return b},_allzero:function(b){for(var a=b.length;a-->0;){if(b.charAt(a)!="0"){return false}}return true},coerceToString_:function(c){var a=this._format,b=this._localizedSymbols,d=(b?b:zk).DECIMAL;return c==null?"":a?zk.fmt.Number.format(a,c,this._rounding,b):d=="."?(""+c):(""+c).replace(".",d)},getAllowedKeys_:function(){var a=this._localizedSymbols;return this.$supers("getAllowedKeys_",arguments)+(a?a:zk).DECIMAL+"e"}});
zkreg('zul.inp.Doublebox');zk._m={};
zk._m['rounded']=[zk._p.p.Intbox,'rounded'];zk._m['default']=[zk._p.p.Intbox,'rounded'];zkmld(zk._p.p.Doublebox,zk._m);zul.inp.Decimalbox=zk.$extends(zul.inp.NumberInputWidget,{setScale:(function(a){return function(b){this[a]=b;return this}})("_scale"),getScale:_zkf$=function(){return this._scale},isScale:_zkf$,coerceFromString_:function(b){if(!b){return null}var c=zk.fmt.Number.unformat(this._format,b,false,this._localizedSymbols),d=new zk.BigDecimal(c.raw),a=d.$toString();if(c.raw!=a&&c.raw!="-"+a){return{error:zk.fmt.Text.format(msgzul.NUMBER_REQUIRED,b)}}if(this._rounding==7&&(this._errmsg||zk.fmt.Number.isRoundingRequired(b,this.getFormat(),this._localizedSymbols))){return{server:true}}if(c.divscale){d.setPrecision(d.getPrecision()+c.divscale)}if(this._scale>0){d=zk.fmt.Number.setScale(d,this._scale,this._rounding)}return d},coerceToString_:function(b){var a=this._format;return b!=null?typeof b=="string"?b:a?zk.fmt.Number.format(a,b.$toString(),this._rounding,this._localizedSymbols):b.$toLocaleString():""},marshall_:function(a){return a?a.$toString():a},unmarshall_:function(a){return a?new zk.BigDecimal(a):a},getAllowedKeys_:function(){var a=this._localizedSymbols;return this.$supers("getAllowedKeys_",arguments)+(a?a:zk).DECIMAL}});
zkreg('zul.inp.Decimalbox');zk._m={};
zk._m['rounded']=[zk._p.p.Intbox,'rounded'];zk._m['default']=[zk._p.p.Intbox,'rounded'];zkmld(zk._p.p.Decimalbox,zk._m);zul.inp.ComboWidget=zk.$extends(zul.inp.InputWidget,{_buttonVisible:true,setButtonVisible:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_buttonVisible",(function(a){zul.inp.RoundUtl.buttonVisible(this,a)})),getButtonVisible:_zkf$=function(){return this._buttonVisible},isButtonVisible:_zkf$,setAutodrop:(function(a){return function(b){this[a]=b;return this}})("_autodrop"),getAutodrop:_zkf$=function(){return this._autodrop},isAutodrop:_zkf$,setWidth:function(){this.$supers("setWidth",arguments);if(this.desktop){this.onSize()}},onSize:function(){zul.inp.RoundUtl.onSize(this)},onFloatUp:function(b){if((!this._inplace&&!this.isOpen())||jq(this.getPopupNode_()).is(":animated")){return}var c=b.origin;if(!zUtl.isAncestor(this,c)){if(this.isOpen()){this.close({sendOnOpen:true})}if(this._inplace){var d=this.$n(),a=this.getInplaceCSS();if(jq(d).hasClass(a)){return}d.style.width=jq.px0(zk(d).revisedWidth(d.offsetWidth));jq(this.getInputNode()).addClass(a);jq(d).addClass(a);this.onSize();d.style.width=this.getWidth()||""}}},onResponse:function(d,e){if((e.rtags.onOpen||e.rtags.onChanging)&&this.isOpen()){if(jq(this.getPopupNode_()).is(":animated")){var c=this;setTimeout(function(){c.onResponse(d,e)},50);return}var a=this.getPopupNode_(),b=this.getPopupSize_(a),f={};try{f.left=a.scrollLeft;f.Top=a.scrollTop;a.style.height="auto";if(zk.ie8){a.style.width=b[0]}this._fixsz(b)}finally{a.scrollTop=f.Top||0;a.scrollLeft=f.left||0}}},onScroll:function(b){if(this.isOpen()){if(b){var a=this.getInputNode();if(a&&zul.inp.InputWidget._isInView(this)){zk(this.getPopupNode_()).position(a,"after_start")}else{this.close()}}}},setOpen:function(a,b){if(this.isRealVisible()){if(a){this.open(b)}else{this.close(b)}}},isOpen:function(){return this._open},open:function(a){if(this._open){return}this._open=true;if(a&&a.focus){this.focus()}var b=this.getPopupNode_(),f=this.getInputNode();if(!b){return}this.setFloating_(true,{node:b});zWatch.fire("onFloatUp",this);var i=this.setTopmost();var g=this.getPopupSize_(b);b.style.width=g[0];b.style.height="auto";b.style.zIndex=i>0?i:1;var c=this.getPopupNode_(true);if(c){c.style.width=c.style.height="auto"}b.style.position="absolute";b.style.display="block";b.style.visibility="hidden";b.style.left="-10000px";var l=zk(b);l.makeVParent();zWatch.fireDown("onVParent",this);if(this.presize_()){g=this.getPopupSize_(b)}b.style.left="";this._fixsz(g);l.position(f,"after_start");if(this._checkPopupPosition()){l.position(f,"before_start")}b.style.display="none";b.style.visibility="";this.slideDown_(b);if(zk.gecko){var k=c?c.rows:null;if(k){var h=b.offsetHeight-b.clientHeight;if(h>10&&b.offsetHeight<150){var d=0;for(var e=k.length;e--;){d+=k[e].offsetHeight}b.style.height=(d+20)+"px"}}}if(!this._shadow){this._shadow=new zk.eff.Shadow(b,{left:-4,right:4,top:-2,bottom:3})}if(a&&a.sendOnOpen){this.fire("onOpen",{open:true,value:f.value},{rtags:{onOpen:1}})}jq(b).addClass(this.$s("open"))},_checkPopupPosition:function(){var c=this.getPopupNode_(),b=zk(c),f=this.getInputNode(),g=b.dimension(true),d=zk(f).dimension(true),a=g.top+g.height,e=d.top+d.height;if((a<e&&a>=d.top)||(g.top>=d.top&&g.top<e)||a>=jq.innerHeight()||(g.top<d.top&&a<d.top-2)){return this._shallSyncPopupPosition=true}return false},presize_:zk.$void,slideDown_:function(a){zk(a).slideDown(this,{afterAnima:this._afterSlideDown,duration:100})},slideUp_:function(a){a.style.display="none"},zsync:function(){this.$supers("zsync",arguments);if(!zk.css3&&this.isOpen()&&this._shadow){this._shadow.sync()}},_afterSlideDown:function(a){if(!this.desktop){zk(a).undoVParent();jq(a).remove()}if(this._shadow){this._shadow.sync()}},getPopupNode_:function(a){return a?this.$n("cave"):this.$n("pp")},close:function(c){if(!this._open){return}var b=this;if(jq(this.getPopupNode_()).is(":animated")){setTimeout(function(){b.close(c)},50);return}this._open=false;if(c&&c.focus){this.focus()}var a=this.getPopupNode_();if(!a){return}this.setFloating_(false);zWatch.fireDown("onHide",this);this.slideUp_(a);zk.afterAnimate(function(){zk(a).undoVParent();zWatch.fireDown("onVParent",b)},-1);if(this._shadow){this._shadow.destroy();this._shadow=null}if(c&&c.sendOnOpen){this.fire("onOpen",{open:false,value:this.getInputNode().value},{rtags:{onOpen:1}})}jq(a).removeClass(this.$s("open"))},_fixsz:function(d){var c=this.getPopupNode_();if(!c){return}var b=this.getPopupNode_(true);if(d[1]=="auto"&&c.offsetHeight>350){c.style.height="350px"}else{if(c.offsetHeight<10){c.style.height="10px";if(this._shadow){this._shadow.sync()}}}if(d[0]=="auto"){var a=this.$n();if(c.offsetWidth<=a.offsetWidth){c.style.width=zk(c).revisedWidth(a.offsetWidth)+"px";if(b){b.style.width="100%"}}else{var e=jq.innerWidth()-20;if(e<a.offsetWidth){e=a.offsetWidth}if(c.offsetWidth>e){c.style.width=e}}}},dnPressed_:zk.$void,upPressed_:zk.$void,otherPressed_:zk.$void,enterPressed_:function(a){this.close({sendOnOpen:true});this.updateChange_();a.stop()},escPressed_:function(a){this.close({sendOnOpen:true});a.stop()},getPopupSize_:function(a){return["auto","auto"]},redrawpp_:function(a){},beforeParentMinFlex_:function(a){if("w"==a){zul.inp.RoundUtl.syncWidth(this,this.$n("btn"))}},doFocus_:function(a){this.$supers("doFocus_",arguments);zul.inp.RoundUtl.doFocus_(this)},doBlur_:function(a){if(this._inplace&&this._open){return}this.$supers("doBlur_",arguments);zul.inp.RoundUtl.doBlur_(this)},afterKeyDown_:function(a,b){if(!b&&this._inplace){jq(this.$n()).toggleClass(this.getInplaceCSS(),a.keyCode==13?null:false)}return this.$supers("afterKeyDown_",arguments)},bind_:function(){this.$supers(zul.inp.ComboWidget,"bind_",arguments);var a,b=this.getInputNode();if(a=this.$n("btn")){this.domListen_(a,zk.android?"onTouchstart":"onClick","_doBtnClick")}zWatch.listen({onSize:this,onFloatUp:this,onResponse:this,onScroll:this});if(!zk.css3){jq.onzsync(this)}},unbind_:function(){this.close();var a=this.$n("btn");if(a){this.domUnlisten_(a,zk.android?"onTouchstart":"onClick","_doBtnClick")}zWatch.unlisten({onSize:this,onFloatUp:this,onResponse:this,onScroll:this});if(!zk.css3){jq.unzsync(this)}this.$supers(zul.inp.ComboWidget,"unbind_",arguments)},inRoundedMold:function(){return true},_doBtnClick:function(a){if(!this._buttonVisible){return}if(!this._disabled&&!jq(this.getPopupNode_()).is(":animated")){if(this._open){this.close({focus:zul.inp.InputCtrl.isPreservedFocus(this),sendOnOpen:true})}else{this.open({focus:zul.inp.InputCtrl.isPreservedFocus(this),sendOnOpen:true})}}if(zk.ios){this._windowX=window.pageXOffset;this._windowY=window.pageYOffset}a.stop()},doKeyDown_:function(a){this._doKeyDown(a);if(!a.stopped){this.$supers("doKeyDown_",arguments)}},doClick_:function(a){if(!this._disabled){if(a.domTarget==this.getPopupNode_()){this.close({focus:zul.inp.InputCtrl.isPreservedFocus(this),sendOnOpen:true})}else{if(this._readonly&&!this.isOpen()&&this._buttonVisible){this.open({focus:zul.inp.InputCtrl.isPreservedFocus(this),sendOnOpen:true})}}this.$supers("doClick_",arguments)}},_doKeyDown:function(a){var d=a.keyCode,b=this._open;if((a.target==this||!(a.target.$instanceof(zul.inp.InputWidget)))&&(d==9||(zk.webkit&&d==0))){if(b){this.close({sendOnOpen:true})}return}if(a.altKey&&(d==38||d==40)){if(b){this.close({sendOnOpen:true})}else{this.open({sendOnOpen:true})}var c={propagation:true};if(zk.ie<11){c.dom=true}a.stop(c);return}if(b&&(d==13||d==27)){if(d==13){this.enterPressed_(a)}else{this.escPressed_(a)}return}if(d==18||d==27||d==13||(d>=112&&d<=123)){return}if(this._autodrop&&!b){this.open({sendOnOpen:true})}if(d==38){this.upPressed_(a)}else{if(d==40){this.dnPressed_(a)}else{this.otherPressed_(a)}}},getIconClass_:zk.$void,redraw_:_zkf=function(a){var c=this.uuid,b=this._buttonVisible;a.push("<span",this.domAttrs_({text:true}),'><input id="',c,'-real" class="',this.$s("input"));if(!b){a.push(" ",this.$s("rightedge"))}a.push('" autocomplete="off"',this.textAttrs_(),'/><a id="',c,'-btn" class="',this.$s("button"));if(!b){a.push(" ",this.$s("disabled"))}a.push('"><i class="',this.$s("icon")," ",this.getIconClass_(),'"></i></a>');this.redrawpp_(a);a.push("</span>")}},{$redraw:_zkf});
zul.inp.Combobox=zk.$extends(zul.inp.ComboWidget,{_autocomplete:true,setAutocomplete:(function(a){return function(b){this[a]=b;return this}})("_autocomplete"),getAutocomplete:_zkf$=function(){return this._autocomplete},isAutocomplete:_zkf$,setRepos:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_repos",(function(){if(this.desktop){var c=this.getInputNode(),b;c.value=this.valueEnter_!=null?this.valueEnter_:this._value||"";if(zk.ie<=11&&c.value){b=c.value.length;b=[b,b]}this._typeahead(this._bDel,b);this._bDel=null;var a=this.getPopupNode_();if(a){a.style.width="auto";if(zk.webkit){this._shallRedoCss=true}}}this._repos=false})),getRepos:_zkf$=function(){return this._repos},isRepos:_zkf$,onResponse:function(){this.$supers("onResponse",arguments);if(this._shallRedoCss){zk(this.getPopupNode_()).redoCSS(-1);this._shallRedoCss=null}if(this._shallCheckPopupPosition){this._checkPopupPosition();this._shallCheckPopupPosition=false}if(this.isOpen()&&this._shallSyncPopupPosition){zk(this.getPopupNode_()).position(this.getInputNode(),"before_start");this._shallSyncPopupPosition=false}},setValue:function(a){this.$supers("setValue",arguments);this._reIndex();this.valueEnter_=null;this._lastsel=this._sel},_reIndex:function(){var b=this.getValue();if(!this._sel||b!=this._sel.getLabel()){if(this._sel){var c=this._sel.$n();if(c){jq(c).removeClass(this._sel.$s("selected"))}}this._sel=this._lastsel=null;for(var a=this.firstChild;a;a=a.nextSibling){if(b==a.getLabel()){this._sel=a;break}}}},validateStrict:function(b){var a=this._cst;return this._findItem(b,true)?null:(a?a._errmsg:"")||msgzul.VALUE_NOT_MATCHED},_findItem:function(b,a){return this._findItem0(b,a)},_findItem0:function(g,a,e,b){var f=this.firstChild;if(f&&g){g=g.toLowerCase();var d=this._sel;if(!d||d.parent!=this){d=f}for(var c=b?d.nextSibling?d.nextSibling:f:d;;){if((!a||!c.isDisabled())&&c.isVisible()&&(e?c.getLabel().toLowerCase().startsWith(g):g==c.getLabel().toLowerCase())){return c}if(!(c=c.nextSibling)){c=f}if(c==d){break}}}},_hilite:function(a){this._hilite2(this._findItem(this.getInputNode().value,this._isStrict()||(a&&a.strict)),a)},_hilite2:function(d,c){c=c||{};var a=this._sel;this._sel=d;if(a&&a.parent==this){var f=a.$n();if(f){jq(f).removeClass(a.$s("selected"))}}if(d&&!d.isDisabled()){jq(d.$n()).addClass(d.$s("selected"))}if(c.sendOnSelect&&this._lastsel!=d){this._lastsel=d;if(d){var b=this.getInputNode(),e=d.getLabel();this.valueEnter_=b.value=e;if(!c.noSelectRange){if(zk.gecko){b.select()}else{zk(b).setSelectionRange(0,e.length)}}}if(c.sendOnChange){this.$supers("updateChange_",[])}this.fire("onSelect",{items:d?[d]:[],reference:d,prevSeld:a})}},_isStrict:function(){var a=this.getConstraint();return a&&a._flags&&a._flags.STRICT},getIconClass_:function(){return"z-icon-caret-down"},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);this._shallCheckPopupPosition=true},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);this._shallCheckPopupPosition=true},open:function(a){this.$supers("open",arguments);this._hilite()},dnPressed_:function(a){this._updnSel(a)},upPressed_:function(a){this._updnSel(a,true)},_updnSel:function(k,h){var e=this.getInputNode(),b=e.value,a,j;if(b||this._sel){b=b.toLowerCase();var f=this._sel,i=this._next(null,h);if(!f||f.parent!=this){f=this._next(null,!h)}if(!f){k.stop();return}for(var l=f;;){if(!l.isDisabled()&&l.isVisible()){var g=l.getLabel().toLowerCase();if(b==g){a=l;break}else{if(!j&&g.startsWith(b)){j=l;break}}}var d=this._next(l,h);if(l==d){break}if((l=d)==f){break}}if(!a){a=j}if(a){var c=zk(e).getSelectionRange();if(c[0]==0&&c[1]==b.length){a=this._next(a,h)}}else{a=this._next(null,!h)}}else{a=this._next(null,true)}if(a){zk(a).scrollIntoView(this.$n("pp"))}this._select(a,{sendOnSelect:true});k.stop()},_next:(function(){function a(e,d,c){var b=d?"previousSibling":"nextSibling";for(var f=c?e:e[b];f;f=f[b]){if(!f.isDisabled()&&f.isVisible()){return f}}return null}return function(c,b){if(c){c=a(c,b)}return c?c:a(b?this.firstChild:this.lastChild,!b,true)}})(),_select:function(c,b){var a=this.getInputNode(),d=a.value=c?c.getLabel():"";this.valueSel_=d;this._hilite2(c,b);if(d){if(zk.gecko){a.select()}else{zk(a).setSelectionRange(0,d.length)}}},otherPressed_:function(b){var f=this,e=b.keyCode,a;this._bDel=a=e==8||e==46;if(this._readonly){switch(e){case 35:case 36:this._hilite2();this.getInputNode().value="";case 37:case 39:this._updnSel(b,e==37||e==35);break;case 8:b.stop();break;default:var c=String.fromCharCode(e);var d=this._findItem0(c,true,true,!!this._sel);if(d){this._select(d,{sendOnSelect:true})}}}else{setTimeout(function(){f._typeahead(a)},zk.opera||zk.webkit?10:0)}},_typeahead:function(a,e){if(zk.currentFocus!=this){return}var c=this.getInputNode(),g=c.value,e=e||zk(c).getSelectionRange(),f=this.firstChild;this.valueEnter_=g;if(!g||!f||e[0]!=g.length||e[0]!=e[1]){return this._hilite({strict:true})}var d=this._findItem(g,true);if(d||a||!this._autocomplete){if(d&&d.getLabel().toLowerCase().startsWith(g.toLowerCase())&&this._autocomplete){c.value=d.getLabel()}return this._hilite2(d)}g=g.toLowerCase();d=this._sel;if(!d||d.parent!=this){d=f}for(var b=d;;){if(!b.isDisabled()&&b.isVisible()&&b.getLabel().toLowerCase().startsWith(g)){c.value=b.getLabel();zk(c).setSelectionRange(g.length,c.value.length);this._hilite2(b);return}if(!(b=b.nextSibling)){b=f}if(b==d){this._hilite2();return}}},updateChange_:function(){var a=this._value!=this.getInputNode().value;if(this.$supers("updateChange_",arguments)&&a){this._hilite({sendOnSelect:true,noSelectRange:true});return true}this.valueEnter_=null},bind_:function(){this.$supers(zul.inp.Combobox,"bind_",arguments);if(this.isListen("onOpen")){this.listen({onChanging:zk.$void},-1000)}if(this._value&&!this._sel){this.setValue(this._value,true)}},unbind_:function(){this._hilite2();this._sel=this._lastsel=null;if(this.isListen("onOpen")){this.unlisten({onChanging:zk.$void})}this.$supers(zul.inp.Combobox,"unbind_",arguments)},redrawpp_:function(b){var c=this.uuid;b.push('<div id="',c,'-pp" class="',this.$s("popup")," ",this.getSclass(),'" style="display:none"><ul id="',c,'-cave" class="',this.$s("content"),'" >');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</ul></div>")},afterAnima_:function(a){if(a&&this._lastsel){zk(this._lastsel).scrollIntoView(this.$n("pp"))}this.$supers("afterAnima_",arguments)}});
zkreg('zul.inp.Combobox');zk._m={};
zk._m['rounded']=zul.inp.ComboWidget.$redraw;
;zk._m['default']=[zk._p.p.Combobox,'rounded'];zkmld(zk._p.p.Combobox,zk._m);zul.inp.Comboitem=zk.$extends(zul.LabelImageWidget,{setDisabled:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_disabled",(function(a){var c=this.$n();if(c){var b=this.$s("disabled");a?jq(c).addClass(b):jq(c).removeClass(b)}})),getDisabled:_zkf$=function(){return this._disabled},isDisabled:_zkf$,setDescription:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_description",(_zkf=function(){this.rerender()})),getDescription:_zkf$=function(){return this._description},isDescription:_zkf$,setContent:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_content",(_zkf)),getContent:_zkf$=function(){return this._content},isContent:_zkf$,domLabel_:function(){return zUtl.encodeXML(this.getLabel(),{pre:1})},doClick_:function(b){if(!this._disabled){var a=this.parent;a._select(this,{sendOnSelect:true,sendOnChange:true});this._updateHoverImage();a.close({sendOnOpen:true,focus:true});a._shallClose=true;if(zul.inp.InputCtrl.isPreservedFocus(this)){zk(a.getInputNode()).focus()}b.stop()}},domClass_:function(b){var a=this.$supers("domClass_",arguments);if(this._disabled&&(!b||!b.zclass)){a+=" "+this.$s("disabled")}return a},deferRedrawHTML_:function(a){a.push("<li",this.domAttrs_({domClass:1}),' class="z-renderdefer"></li>')}});
zkreg('zul.inp.Comboitem');zk._m={};
zk._m['default']=function(b){b.push("<li",this.domAttrs_({text:true}),'><span class="',this.$s("image"),'">',this.domImage_(),'</span><span class="',this.$s("text"),'">',this.domLabel_());var a;if(a=this._description){b.push('<br/><span class="',this.$s("inner"),'">',zUtl.encodeXML(a),"</span>")}if(a=this._content){b.push('<span class="',this.$s("content"),'">',a,"</span>")}b.push("</span></li>")};
;zkmld(zk._p.p.Comboitem,zk._m);zul.inp.Bandbox=zk.$extends(zul.inp.ComboWidget,{getPopupSize_:function(b){var d=this.firstChild,a,c;if(d){a=d._hflex=="min"&&d._hflexsz?jq.px0(d._hflexsz+zk(b).padBorderWidth()):d.getWidth();c=d._vflex=="min"&&d._vflexsz?jq.px0(d._vflexsz+zk(b).padBorderHeight()):d.getHeight()}return[a||"auto",c||"auto"]},getCaveNode:function(){return this.$n("pp")||this.$n()},redrawpp_:function(b){b.push('<div id="',this.uuid,'-pp" class="',this.$s("popup"),'" style="display:none">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div>")},getIconClass_:function(){return"z-icon-search"},open:function(a){if(!this.firstChild){if(a&&a.sendOnOpen){this.fire("onOpen",{open:true,value:this.getInputNode().value},{rtags:{onOpen:1}})}return}this.$supers("open",arguments)},presize_:function(){var a=this.firstChild;if(a&&(a._hflex=="min"||a._vflex=="min")){zWatch.fireDown("onFitSize",a,{reverse:true});return true}},enterPressed_:function(a){if(a.domTarget==this.getInputNode()){this.$supers("enterPressed_",arguments)}},doKeyUp_:function(a){if(a.domTarget==this.getInputNode()){this.$supers("doKeyUp_",arguments)}}});
zkreg('zul.inp.Bandbox');zk._m={};
zk._m['rounded']=zul.inp.ComboWidget.$redraw;
;zk._m['default']=[zk._p.p.Bandbox,'rounded'];zkmld(zk._p.p.Bandbox,zk._m);zul.inp.Bandpopup=zk.$extends(zul.Widget,{afterChildrenMinFlex_:function(b){if(b=="w"){var c=this.parent,a=c&&c.$n("pp");if(a){a.style.width=jq.px0(this._hflexsz+zk(a).padBorderWidth());zk(a)._updateProp(["width"])}}}});
zkreg('zul.inp.Bandpopup',true);zk._m={};
zk._m['default']=function(b){b.push("<div",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div>")};
;zkmld(zk._p.p.Bandpopup,zk._m);(function(){function d(f){var h=""+f,g=h.indexOf(".");return g<0?0:h.length-g-1}function c(f,h){var g=Math.pow(10,h);return Math.round(f*g)/g}function a(m){var h=m.$n("btn"),l=m._curpos,i=m.isDecimal();h.title=i?l.toFixed(d(e(m))):l;m.updateFormData(l);var k=m.isVertical(),j=zk(m.$n()).cmOffset(),g=k?m._getHeight():m._getWidth(),f=g>0?((l-m._minpos)*g)/(m._maxpos-m._minpos):0;if(!i){f=Math.round(f)}j=zk(h).toStyleOffset(j[0],j[1]);j=k?[0,(j[1]+f)]:[(j[0]+f),0];j=m._snap(j[0],j[1]);return j[(k?1:0)]}function b(j,i){var h=jq(j.$n("btn")),f=j.isVertical()?["top","height"]:["left","width"],g={};g[f[0]]=jq.px0(i?(i+zk.parseInt(h.css(f[0]))-h[f[1]]()/2):a(j));return g}function e(g){var f=g._step;return(!g.isDecimal()||f!=-1)?f:0.1}zul.inp.Slider=zk.$extends(zul.Widget,{_orient:"horizontal",_height:"200px",_width:"200px",_curpos:0,_minpos:0,_maxpos:100,_slidingtext:"{0}",_pageIncrement:-1,_step:-1,_mode:"integer",setOrient:(function(f,g){return function(h,i){var j=this[f];this[f]=h;if(j!==h||(i&&i.force)){this.__fname__=f.substring(1);g.apply(this,arguments);delete this.__fname__}return this}})("_orient",(function(){this.rerender()})),getOrient:_zkf$=function(){return this._orient},isOrient:_zkf$,setCurpos:(function(f,g){return function(h,i){var j=this[f];this[f]=h;if(j!==h||(i&&i.force)){this.__fname__=f.substring(1);g.apply(this,arguments);delete this.__fname__}return this}})("_curpos",(function(){if(this.desktop){this._fixPos()}})),getCurpos:_zkf$=function(){return this._curpos},isCurpos:_zkf$,setMinpos:(function(f,g){return function(h,i){var j=this[f];this[f]=h;if(j!==h||(i&&i.force)){this.__fname__=f.substring(1);g.apply(this,arguments);delete this.__fname__}return this}})("_minpos",(function(f){if(this._curpos<f){this._curpos=f}this._fixStep();if(this.desktop){this._fixPos()}})),getMinpos:_zkf$=function(){return this._minpos},isMinpos:_zkf$,setMaxpos:(function(f,g){return function(h,i){var j=this[f];this[f]=h;if(j!==h||(i&&i.force)){this.__fname__=f.substring(1);g.apply(this,arguments);delete this.__fname__}return this}})("_maxpos",(function(f){if(this._curpos>f){this._curpos=f}this._fixStep();if(this.desktop){this._fixPos()}})),getMaxpos:_zkf$=function(){return this._maxpos},isMaxpos:_zkf$,setSlidingtext:(function(f){return function(g){this[f]=g;return this}})("_slidingtext"),getSlidingtext:_zkf$=function(){return this._slidingtext},isSlidingtext:_zkf$,setPageIncrement:(function(f){return function(g){this[f]=g;return this}})("_pageIncrement"),getPageIncrement:_zkf$=function(){return this._pageIncrement},isPageIncrement:_zkf$,setStep:(function(f,g){return function(h,i){var j=this[f];this[f]=h;if(j!==h||(i&&i.force)){this.__fname__=f.substring(1);g.apply(this,arguments);delete this.__fname__}return this}})("_step",(function(){this._fixStep()})),getStep:_zkf$=function(){return this._step},isStep:_zkf$,setName:(function(f,g){return function(h,i){var j=this[f];this[f]=h;if(j!==h||(i&&i.force)){this.__fname__=f.substring(1);g.apply(this,arguments);delete this.__fname__}return this}})("_name",(function(){if(this.efield){this.efield.name=this._name}})),getName:_zkf$=function(){return this._name},isName:_zkf$,setMode:(function(f,g){return function(h,i){var j=this[f];this[f]=h;if(j!==h||(i&&i.force)){this.__fname__=f.substring(1);g.apply(this,arguments);delete this.__fname__}return this}})("_mode",(function(){this._fixStep();if(this.desktop){this._fixPos()}})),getMode:_zkf$=function(){return this._mode},isMode:_zkf$,domClass_:function(){var f=this.$supers("domClass_",arguments),g=this.isVertical();if(g){f+=" "+this.$s("vertical")}else{f+=" "+this.$s("horizontal")}if(this.inSphereMold()){f+=" "+this.$s("sphere")}else{if(this.inScaleMold()&&!g){f+=" "+this.$s("scale")}}return f},onup_:function(f){var g=zul.inp.Slider.down_btn,h;if(g){h=zk.Widget.$(g)}zul.inp.Slider.down_btn=null;if(h){jq(document).unbind("zmouseup",h.onup_)}},doMouseDown_:function(f){jq(document).bind("zmouseup",this.onup_);zul.inp.Slider.down_btn=this.$n("btn");this.$supers("doMouseDown_",arguments)},doClick_:function(p){var n=jq(this.$n("btn")),l=n.zk.revisedOffset(),s=this,r=this._pageIncrement,j=r<0&&e(this)<0,m=this.isVertical(),q=this._getHeight(),f=this._getWidth(),h=m?p.pageY-l[1]:p.pageX-l[0];if(!n[0]||n.is(":animated")){return}if(!j){if(r>0){var g=this._curpos+(h>0?r:-r);this._curpos=c(this._constraintPos(g),d(r))}else{var k=m?q:f,o=(h/k)*(this._maxpos-this._minpos);this._curpos=this._getSteppedPos(o+this._curpos)}h=null}var i=b(this,h);if(m&&zk.parseInt(i.top)>q){i.top=jq.px0(q)}if(!m&&zk.parseInt(i.left)>f){i.left=jq.px0(f)}n.animate(i,"slow",function(){l=j?s._realpos():s._curpos;l=s._constraintPos(l);s.fire("onScroll",s.isDecimal()?{decimal:l}:l);if(j){s._fixPos()}});this.$supers("doClick_",arguments)},_makeDraggable:function(){var f={constraint:this._orient||"horizontal",starteffect:this._startDrag,snap:f,change:this._dragging,endeffect:this._endDrag};if(e(this)>0){f.snap=this._getStepOffset()}this._drag=new zk.Draggable(this,this.$n("btn"),f)},_snap:function(g,j){var h=this.$n("btn"),i=zk(this.$n()).cmOffset();i=zk(h).toStyleOffset(i[0],i[1]);if(g<=i[0]){g=i[0]}else{var f=i[0]+this._getWidth();if(g>f){g=f}}if(j<=i[1]){j=i[1]}else{var f=i[1]+this._getHeight();if(j>f){j=f}}return[g,j]},_startDrag:function(g){var f=g.control;f.$n("btn").title="";f.slidepos=f._curpos,vert=f.isVertical();jq(document.body).append('<div id="zul_slidetip" class="z-slider-popup"style="position:absolute;display:none;z-index:60000;background-color:white;border: 1px outset">'+f.slidepos+"</div>");f.slidetip=jq("#zul_slidetip")[0];if(f.slidetip){var h=f.slidetip.style;if(zk.webkit){h.top="0px";h.left="0px"}h.display="block";zk(f.slidetip).position(f.$n(),vert?"end_before":"after_start")}},_dragging:function(h){var g=h.control,f=g.isDecimal(),j=g._realpos();if(j!=g.slidepos){g.slidepos=j=g._constraintPos(j);var i=f?j.toFixed(d(e(g))):j;if(g.slidetip){g.slidetip.innerHTML=g._slidingtext.replace(/\{0\}/g,i)}g.fire("onScrolling",f?{decimal:j}:j)}g._fixPos()},_endDrag:function(g){var f=g.control,h=f._realpos();f.fire("onScroll",f.isDecimal()?{decimal:h}:h);f._fixPos();jq(f.slidetip).remove();f.slidetip=null},_realpos:function(l){var n=zk(this.$n("btn")).revisedOffset(),f=zk(this.$n()).revisedOffset(),j=this._maxpos,i=this._minpos,g=e(this),k;if(this.isVertical()){var m=this._getHeight();k=m?((n[1]-f[1])*(j-i))/m:0}else{var h=this._getWidth();k=h?((n[0]-f[0])*(j-i))/h:0}if(!this.isDecimal()){k=Math.round(k)}if(g>0){return this._curpos=k>0?c(k+i,d(g)):i}else{return this._curpos=(k>0?k:0)+i}},_constraintPos:function(f){return f<this._minpos?this._minpos:(f>this._maxpos?this._maxpos:f)},_getSteppedPos:function(j){var f=this._minpos,h=e(this),i=1,g;j-=f;if(this.isDecimal()){i=Math.pow(10,d(h));j*=i;h*=i}g=j%h;return(j-g+Math.round((g)/h)*h)/i+f},_getWidth:function(){return this.$n().clientWidth-this.$n("btn").offsetWidth},_getHeight:function(){return this.$n().clientHeight-this.$n("btn").offsetHeight},_getStepOffset:function(){var f=this.isVertical()?this._getHeight():this._getWidth(),g=e(this),h=[0,0];if(g){h[(this.isVertical()?1:0)]=f>0?f*g/(this._maxpos-this._minpos):0}return h},_fixSize:function(){var j=this.$n(),g=this.$n("btn"),f=this.$n("inner").style;if(this.isVertical()){g.style.top="-"+g.offsetHeight/2+"px";var i=j.clientHeight;f.height=jq.px0(i>0?i:this._height-g.offsetHeight)}else{g.style.left="-"+g.offsetWidth/2+"px";var h=j.clientWidth;f.width=jq.px0(h>0?h:this._width-g.offsetWidth)}},_fixPos:function(){this.$n("btn").style[this.isVertical()?"top":"left"]=jq.px0(a(this))},_fixStep:function(){var f=e(this);if(this._drag){if(f<=0){if(this._drag.opts.snap){delete this._drag.opts.snap}}else{this._drag.opts.snap=this._getStepOffset()}}},onSize:function(){this._fixSize();this._fixPos()},inScaleMold:function(){return this.getMold()=="scale"},inSphereMold:function(){return this.getMold()=="sphere"},isVertical:function(){return"vertical"==this._orient},isDecimal:function(){return"decimal"==this._mode},updateFormData:function(f){if(this._name){f=f||0;if(!this.efield){this.efield=jq.newHidden(this._name,f,this.$n())}else{this.efield.value=f}}},bind_:function(){this.$supers(zul.inp.Slider,"bind_",arguments);this._fixSize();this._makeDraggable();zWatch.listen({onSize:this});this.updateFormData(this._curpos);this._fixPos()},unbind_:function(){this.efield=null;if(this._drag){this._drag.destroy();this._drag=null}zWatch.unlisten({onSize:this});this.$supers(zul.inp.Slider,"unbind_",arguments)}})})();
zkreg('zul.inp.Slider');zk._m={};
zk._m['scale']=function(a){var c=this.isVertical(),b=this.uuid;a.push("<div",this.domAttrs_(c?{width:true}:{height:true}),'><div id="',b,'-inner" class="',this.$s("center"),'"><div id="',b,'-btn" class="',this.$s("button"),'"></div></div></div>')};
;zk._m['sphere']=[zk._p.p.Slider,'scale'];zk._m['default']=[zk._p.p.Slider,'scale'];zkmld(zk._p.p.Slider,zk._m);zul.inp.Spinner=zk.$extends(zul.inp.NumberInputWidget,{_step:1,_buttonVisible:true,setStep:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_step",(_zkf=function(){})),getStep:_zkf$=function(){return this._step},isStep:_zkf$,setButtonVisible:(function(a,b){return function(c,d){var e=this[a];this[a]=c;if(e!==c||(d&&d.force)){this.__fname__=a.substring(1);b.apply(this,arguments);delete this.__fname__}return this}})("_buttonVisible",(function(a){zul.inp.RoundUtl.buttonVisible(this,a)})),getButtonVisible:_zkf$=function(){return this._buttonVisible},isButtonVisible:_zkf$,inRoundedMold:function(){return true},intValue:function(){return this.$supers("getValue",arguments)},setConstraint:function(a){if(typeof a=="string"&&a.charAt(0)!="["){var b=new zul.inp.SimpleSpinnerConstraint(a);this._min=b._min;this._max=b._max;this.$supers("setConstraint",[b])}else{this.$supers("setConstraint",arguments)}},coerceFromString_:function(a){if(!a){return null}var b=zk.fmt.Number.unformat(this._format,a,false,this._localizedSymbols),c=parseInt(b.raw,10);if(isNaN(c)||(b.raw!=""+c&&b.raw!="-"+c)){return{error:zk.fmt.Text.format(msgzul.INTEGER_REQUIRED,a)}}if(c>2147483647||c<-2147483648){return{error:zk.fmt.Text.format(msgzul.OUT_OF_RANGE+"(−2147483648 - 2147483647)")}}if(b.divscale){c=Math.round(c/Math.pow(10,b.divscale))}return c},coerceToString_:function(b){var a=this._format;return a?zk.fmt.Number.format(a,b,this._rounding,this._localizedSymbols):b!=null?""+b:""},onSize:function(){zul.inp.RoundUtl.onSize(this)},onHide:zul.inp.Textbox.onHide,validate:zul.inp.Intbox.validate,doKeyDown_:function(a){var b=this.getInputNode();if(b.disabled||b.readOnly){return}switch(a.keyCode){case 38:this.checkValue();this._increase(true);a.stop();return;case 40:this.checkValue();this._increase(false);a.stop();return}this.$supers("doKeyDown_",arguments)},_ondropbtnup:function(a){this.domUnlisten_(document.body,"onZMouseup","_ondropbtnup");this._stopAutoIncProc();this._currentbtn=null},_btnDown:function(b){if(!this._buttonVisible||this._disabled){return}var c=this.$n("btn");if(!zk.dragging){if(this._currentbtn){this._ondropbtnup(b)}this.domListen_(document.body,"onZMouseup","_ondropbtnup");this._currentbtn=c}this.checkValue();var d=zk(c).revisedOffset(),a=(b.pageY-d[1])<c.offsetHeight/2;if(a){this._increase(true);this._startAutoIncProc(true)}else{this._increase(false);this._startAutoIncProc(false)}b.stop()},checkValue:function(){var c=this.getInputNode(),b=this._min,a=this._max;if(!c.value){if(b&&a){c.value=(b<=0&&0<=a)?0:b}else{if(b){c.value=b<=0?0:b}else{if(a){c.value=0<=a?0:a}else{c.value=0}}}}},_btnUp:function(b){if(!this._buttonVisible||this._disabled||zk.dragging){return}this._onChanging();this._stopAutoIncProc();var c=this.getInputNode();if(zk.ie<11){var a=c.value.length;zk(c).setSelectionRange(a,a)}c.focus()},_increase:function(b){var c=this.getInputNode(),d=this.coerceFromString_(c.value);if(d&&d.error){return}var a=b?(d+this._step):(d-this._step);if(a>Math.pow(2,31)-1){a=Math.pow(2,31)-1}else{if(a<-Math.pow(2,31)){a=-Math.pow(2,31)}}if(this._max!=null&&a>this._max){a=d}else{if(this._min!=null&&a<this._min){a=d}}c.value=this.coerceToString_(a);this._onChanging()},_clearValue:function(){this.getInputNode().value=this._defRawVal="";return true},_startAutoIncProc:function(a){var b=this;if(this.timerId){clearInterval(this.timerId)}this.timerId=setInterval(function(){b._increase(a)},200)},_stopAutoIncProc:function(){if(this.timerId){clearTimeout(this.timerId)}this.timerId=null},doFocus_:function(a){this.$supers("doFocus_",arguments);zul.inp.RoundUtl.doFocus_(this)},doBlur_:function(a){if(zk.ie8_){var b=this.$n("btn");if(b&&!this._instant&&jq("#"+b.id+":hover").length>0){return}}this.$supers("doBlur_",arguments);zul.inp.RoundUtl.doBlur_(this)},afterKeyDown_:function(a,b){if(!b&&this._inplace){jq(this.$n()).toggleClass(this.getInplaceCSS(),a.keyCode==13?null:false)}return this.$supers("afterKeyDown_",arguments)},bind_:function(){this.$supers(zul.inp.Spinner,"bind_",arguments);var a;if(a=this.$n("btn")){this.domListen_(a,"onZMouseDown","_btnDown").domListen_(a,"onZMouseUp","_btnUp")}zWatch.listen({onSize:this})},unbind_:function(){if(this.timerId){clearTimeout(this.timerId);this.timerId=null}zWatch.unlisten({onSize:this});var a=this.$n("btn");if(a){this.domUnlisten_(a,"onZMouseDown","_btnDown").domUnlisten_(a,"onZMouseUp","_btnUp")}this.$supers(zul.inp.Spinner,"unbind_",arguments)},getBtnUpIconClass_:function(){return"z-icon-angle-up"},getBtnDownIconClass_:function(){return"z-icon-angle-down"}});
zkreg('zul.inp.Spinner');zk._m={};
zk._m['rounded']=function(b){var d=this.uuid,c=this._buttonVisible;b.push("<span",this.domAttrs_({text:true}),">",'<input id="',d,'-real"','class="',this.$s("input"));if(!c){b.push(" ",this.$s("rightedge"))}b.push('" autocomplete="off"',this.textAttrs_(),"/>",'<span id="',d,'-btn"','class="',this.$s("button"));if(!c){b.push(" ",this.$s("disabled"))}var a=this.$s("icon")+" ";b.push('"><a id="',d,'-btn-up" class="',a,this.$s("up"),'"><i class="',this.getBtnUpIconClass_(),'"></i></a><i class="',this.$s("separator"),'"></i><a id="',d,'-btn-down" class="',a,this.$s("down"),'"><i class="',this.getBtnDownIconClass_(),'"></i></a>');b.push("</span></span>")};
;zk._m['default']=[zk._p.p.Spinner,'rounded'];zkmld(zk._p.p.Spinner,zk._m);(function(){function b(d,f){var g=""+d,e=g.indexOf(f);return e<0?0:g.length-e-1}function a(i,h,g,e){var f;if(g){f=Math.pow(10,g);i*=f;h*=f;i=Math.round(i);h=Math.round(h)}var d=e?i+h:i-h;if(g){d/=f}return d}function c(h,g){var e=h._localizedSymbols?h._localizedSymbols.DECIMAL:zk.DECIMAL,f=b(h._step,e),d=b(g||h._value,e);h._fixedDigits=Math.max(f,d)}zul.inp.Doublespinner=zk.$extends(zul.inp.NumberInputWidget,{_step:1,_buttonVisible:true,setStep:(function(d,e){return function(f,g){var h=this[d];this[d]=f;if(h!==f||(g&&g.force)){this.__fname__=d.substring(1);e.apply(this,arguments);delete this.__fname__}return this}})("_step",(function(d){c(this)})),getStep:_zkf$=function(){return this._step},isStep:_zkf$,setButtonVisible:(function(d,e){return function(f,g){var h=this[d];this[d]=f;if(h!==f||(g&&g.force)){this.__fname__=d.substring(1);e.apply(this,arguments);delete this.__fname__}return this}})("_buttonVisible",(function(d){zul.inp.RoundUtl.buttonVisible(this,d)})),getButtonVisible:_zkf$=function(){return this._buttonVisible},isButtonVisible:_zkf$,inRoundedMold:function(){return true},doubleValue:function(){return this.$supers("getValue",arguments)},setConstraint:function(d){if(typeof d=="string"&&d.charAt(0)!="["){var e=new zul.inp.SimpleDoubleSpinnerConstraint(d);this._min=e._min;this._max=e._max;this.$supers("setConstraint",[e])}else{this.$supers("setConstraint",arguments)}},coerceFromString_:function(l){if(!l){return null}var f=zk.fmt.Number.unformat(this._format,l,false,this._localizedSymbols),m=f.raw,e=parseFloat(m),g=""+e,k=g.indexOf("."),i=m.indexOf(".");if(isNaN(e)||g.indexOf("e")<0){if(i==0){m="0"+m;++i}if(i>=0&&m.substring(m.substring(i+1))&&k<0){k=g.length;g+="."}var h=m.length,d=g.length;if(k>=0&&k<i){d-=k;h-=i;for(var j=i-k;j-->0;){g="0"+g}}if(d<h){for(var j=h-d;j-->0;){g+="0"}}if(isNaN(e)||(m!=g&&m!="-"+g&&m.indexOf("e")<0)){if(!isNaN(e)&&m!=g){return{error:zk.fmt.Text.format(msgzul.ILLEGAL_VALUE)}}return{error:zk.fmt.Text.format(msgzul.NUMBER_REQUIRED,l)}}}if(f.divscale){e=e/Math.pow(10,f.divscale)}c(this,e);return e},coerceToString_:function(f){var e=this._format,g=this._localizedSymbols?this._localizedSymbols.DECIMAL:zk.DECIMAL;if(typeof f==="number"&&f%1==0){var d=1;if(this._step&&(decimal=(this._step+"").split(".")[1])){d=decimal.length}f=parseFloat(f).toFixed(d)}return f==null?"":e?zk.fmt.Number.format(e,parseFloat(f),this._rounding,this._localizedSymbols):g=="."?(""+f):(""+f).replace(".",g)},onSize:function(){zul.inp.RoundUtl.onSize(this)},onHide:zul.inp.Textbox.onHide,validate:zul.inp.Doublebox.validate,doKeyDown_:function(d){var e=this.getInputNode();if(e.disabled||e.readOnly){return}switch(d.keyCode){case 38:this.checkValue();this._increase(true);d.stop();return;case 40:this.checkValue();this._increase(false);d.stop();return}this.$supers("doKeyDown_",arguments)},_ondropbtnup:function(d){this.domUnlisten_(document.body,"onZMouseup","_ondropbtnup");this._stopAutoIncProc();this._currentbtn=null},_btnDown:function(e){if(!this._buttonVisible||this._disabled){return}var f=this.$n("btn");if(!zk.dragging){if(this._currentbtn){this._ondropbtnup(e)}this.domListen_(document.body,"onZMouseup","_ondropbtnup");this._currentbtn=f}this.checkValue();var g=zk(f).revisedOffset(),d=(e.pageY-g[1])<f.offsetHeight/2;if(d){this._increase(true);this._startAutoIncProc(true)}else{this._increase(false);this._startAutoIncProc(false)}e.stop()},checkValue:function(){var f=this.getInputNode(),e=this._min,d=this._max;if(!f.value){if(e&&d){f.value=(e<=0&&0<=d)?0:e}else{if(e){f.value=e<=0?0:e}else{if(d){f.value=0<=d?0:d}else{f.value=0}}}}},_btnUp:function(e){if(!this._buttonVisible||this._disabled||zk.dragging){return}this._onChanging();this._stopAutoIncProc();var f=this.getInputNode();if(zk.ie<11){var d=f.value.length;zk(f).setSelectionRange(d,d)}f.focus()},_increase:function(g){var f=this.getInputNode(),h=this.coerceFromString_(f.value);if(h&&h.error){return}var e=Math.max(b(h),this._fixedDigits),d=a(h,this._step,e,g);if(d>Math.pow(2,63)-1){d=Math.pow(2,63)-1}else{if(d<-Math.pow(2,63)){d=-Math.pow(2,63)}}if(this._max!=null&&d>this._max){d=h}else{if(this._min!=null&&d<this._min){d=h}}f.value=this.coerceToString_(d);this._onChanging()},_clearValue:function(){this.getInputNode().value=this._defRawVal="";return true},_startAutoIncProc:function(d){var e=this;if(this.timerId){clearInterval(this.timerId)}this.timerId=setInterval(function(){e._increase(d)},200)},_stopAutoIncProc:function(){if(this.timerId){clearTimeout(this.timerId)}this.timerId=null},syncWidth:function(){zul.inp.RoundUtl.syncWidth(this,this.$n("btn"))},doFocus_:function(d){this.$supers("doFocus_",arguments);zul.inp.RoundUtl.doFocus_(this)},doBlur_:function(d){this.$supers("doBlur_",arguments);zul.inp.RoundUtl.doBlur_(this)},afterKeyDown_:function(d,e){if(!e&&this._inplace){jq(this.$n()).toggleClass(this.getInplaceCSS(),d.keyCode==13?null:false)}return this.$supers("afterKeyDown_",arguments)},getAllowedKeys_:function(){var d=this._localizedSymbols;return this.$supers("getAllowedKeys_",arguments)+(d?d:zk).DECIMAL+"e"},bind_:function(){this.$supers(zul.inp.Doublespinner,"bind_",arguments);var d;if(d=this.$n("btn")){this.domListen_(d,"onZMouseDown","_btnDown").domListen_(d,"onZMouseUp","_btnUp")}zWatch.listen({onSize:this})},unbind_:function(){if(this.timerId){clearTimeout(this.timerId);this.timerId=null}zWatch.unlisten({onSize:this});var d=this.$n("btn");if(d){this.domUnlisten_(d,"onZMouseDown","_btnDown").domUnlisten_(d,"onZMouseUp","_btnUp")}this.$supers(zul.inp.Doublespinner,"unbind_",arguments)},getBtnUpIconClass_:function(){return"z-icon-angle-up"},getBtnDownIconClass_:function(){return"z-icon-angle-down"}})})();
zkreg('zul.inp.Doublespinner');zk._m={};
zk._m['rounded']=[zk._p.p.Spinner,'rounded'];zk._m['default']=[zk._p.p.Spinner,'rounded'];zkmld(zk._p.p.Doublespinner,zk._m);
}finally{zk.setLoaded(zk._p.n);}});zk.setLoaded('zul.inp',1);