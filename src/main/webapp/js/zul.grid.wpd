zk.load('zul.mesh',function(){if(zk._p=zkpi('zul.grid'))try{
zul.grid.Column=zk.$extends(zul.mesh.SortWidget,{getGrid:function(){return this.parent?this.parent.parent:null},$init:function(){this.$supers("$init",arguments);this.listen({onGroup:this},-1000)},getMeshBody:function(){var a=this.getGrid();return a?a.rows:null},checkClientSort_:function(b){var a;return !(!(a=this.getMeshBody())||a.hasGroup())&&this.$supers("checkClientSort_",arguments)},group:function(e,s){var v=this.getSortDirection();if(e){if("ascending"==v){return false}}else{if("descending"==v){return false}}var y=e?this._sortAscending:this._sortDescending;if(y=="fromServer"){return false}else{if(y=="none"){s.stop();return false}}var a=this.getMeshWidget();if(!a||a.isModel()||!zk.feature.pe||!zk.isLoaded("zkex.grid")){return false}var q=this.getMeshBody();if(!q){return false}s.stop();var D=q.desktop,x=q.$n();try{q.unbind();if(q.hasGroup()){for(var u=q.getGroups(),C=u.length;--C>=0;){q.removeChild(u[C])}}var E=[],f=this.getChildIndex();for(var B=0,o=0,g=a.getBodyWidgetIterator(),p;(p=g.next());o++){for(var A=0,b=p.firstChild;b;b=b.nextSibling,A++){if(A==f){E[B++]={wgt:b,index:o}}}}var l=v=="ascending"?-1:1,n=this.sorting,r=y=="client(number)";E.sort(function(i,d){var k=n(i.wgt,d.wgt,r)*l;if(k==0){k=(i.index<d.index?-1:1)}return k});for(;q.firstChild;){q.removeChild(q.firstChild)}for(var c,j,h=this.getChildIndex(),B=0,A=E.length;B<A;B++){j=E[B];if(!c||n(c.wgt,j.wgt,r)!=0){var m,b=j.wgt.parent.getChildAt(h);if(b&&b.$instanceof(zul.wgt.Label)){m=new zkex.grid.Group();m.appendChild(new zul.wgt.Label({value:b.getValue()}))}else{var t=b.firstChild;if(t&&t.$instanceof(zul.wgt.Label)){m=new zkex.grid.Group();m.appendChild(new zul.wgt.Label({value:t.getValue()}))}else{m=new zkex.grid.Group();m.appendChild(new zul.wgt.Label({value:msgzul.GRID_OTHER}))}}q.appendChild(m)}q.appendChild(j.wgt.parent);c=j}this._fixDirection(e)}finally{q.replaceHTML(x,D)}return true},setLabel:function(a){this.$supers("setLabel",arguments);if(this.parent){this.parent._syncColMenu()}},setVisible:function(a){if(this.isVisible()!=a){this.$supers("setVisible",arguments);if(this.parent){this.parent._syncColMenu()}}},onGroup:function(a){var b=this.getSortDirection();if("ascending"==b){this.group(false,a)}else{if("descending"==b){this.group(true,a)}else{if(!this.group(true,a)){this.group(false,a)}}}},bind_:function(){this.$supers(zul.grid.Column,"bind_",arguments);var b=this.$n();this.domListen_(b,"onMouseOver").domListen_(b,"onMouseOut");var a=this.$n("btn");if(a){this.domListen_(a,"onClick","_doMenuClick")}},unbind_:function(){var b=this.$n();this.domUnlisten_(b,"onMouseOver").domUnlisten_(b,"onMouseOut");var a=this.$n("btn");if(a){this.domUnlisten_(a,"onClick","_doMenuClick")}this.$supers(zul.grid.Column,"unbind_",arguments)},_doMouseOver:function(a){if(this.isSortable_()||(this.parent._menupopup&&this.parent._menupopup!="none")){jq(this.$n()).addClass(this.$s("hover"))}},_doMouseOut:function(a){if(this.isSortable_()||(this.parent._menupopup&&this.parent._menupopup!="none")){var b=jq(this.$n());if(!b.hasClass(this.$s("visited"))){b.removeClass(this.$s("hover"))}}}});
zkreg('zul.grid.Column',true);zk._m={};
zk._m['default']=zul.mesh.HeaderWidget.redraw;
;zkmld(zk._p.p.Column,zk._m);zul.grid.Columns=zk.$extends(zul.mesh.ColumnMenuWidget,{getGrid:function(){return this.parent},rerender:function(){if(this.desktop){if(this.parent){this.parent.rerender()}else{this.$supers("rerender",arguments)}}return this},getGroupPackage_:function(){return"zkex.grid"}});
zkreg('zul.grid.Columns');zk._m={};
zk._m['default']=zul.mesh.HeadWidget.redraw;
;zkmld(zk._p.p.Columns,zk._m);(function(){function b(e){if(e.desktop){var d=e.$n("empty"),f=0;if(e.rows&&e.rows.nChildren){d.style.display="none"}else{if(e.columns){for(var c=e.columns.firstChild;c;c=c.nextSibling){if(c.isVisible()){f++}}}d.colSpan=f||1;d.style.display="table-cell"}}e._shallFixEmpty=false}var a=zul.grid.Grid=zk.$extends(zul.mesh.MeshWidget,{_scrollbar:null,setEmptyMessage:(function(c,d){return function(e,f){var g=this[c];this[c]=e;if(g!==e||(f&&f.force)){this.__fname__=c.substring(1);d.apply(this,arguments);delete this.__fname__}return this}})("_emptyMessage",(function(c){if(this.desktop){jq(this.$n("empty")).html(c)}})),getEmptyMessage:_zkf$=function(){return this._emptyMessage},isEmptyMessage:_zkf$,getCell:function(e,c){var d;if(!(d=this.rows)){return null}if(d.nChildren<=e){return null}var e=d.getChildAt(e);return e.nChildren<=c?null:e.getChildAt(c)},getOddRowSclass:function(){return this._scOddRow==null?this.$s("odd"):this._scOddRow},setOddRowSclass:function(c){if(!c){c=null}if(this._scOddRow!=c){this._scOddRow=c;var d=this.$n();if(d&&this.rows){this.rows.stripe()}}return this},rerender:function(){this.$supers(a,"rerender",arguments);if(this.rows){this.rows._syncStripe()}return this},insertBefore:function(e,d,c){if(this.$super("insertBefore",e,d,!this.z_rod)){this._fixOnAdd(e,c,c);return true}},appendChild:function(d,c){if(this.$super("appendChild",d,!this.z_rod)){if(!this.insertingBefore_){this._fixOnAdd(d,c,c)}return true}},_fixOnAdd:function(e,d,c){if(e.$instanceof(zul.grid.Rows)){this.rows=e;this._syncEmpty()}else{if(e.$instanceof(zul.grid.Columns)){this.columns=e;this._syncEmpty()}else{if(e.$instanceof(zul.grid.Foot)){this.foot=e}else{if(e.$instanceof(zul.mesh.Paging)){this.paging=e}else{if(e.$instanceof(zul.mesh.Frozen)){this.frozen=e}}}}}if(!d){this.rerender()}if(!c){this._syncSize()}},onChildRemoved_:function(d){this.$supers("onChildRemoved_",arguments);var c;if(d==this.rows){this.rows=null;c=true;this._syncEmpty()}else{if(d==this.columns){this.columns=null;this._syncEmpty()}else{if(d==this.foot){this.foot=null}else{if(d==this.paging){this.paging=null}else{if(d==this.frozen){this.frozen=null;this.destroyBar_()}}}}}if(!c&&!this.childReplacing_){this._syncSize()}},redrawEmpty_:function(c){c.push('<tbody class="',this.$s("emptybody"),'"><tr><td id="',this.uuid,'-empty" style="display:none">',this._emptyMessage,"</td></tr></tbody>")},bind_:function(f,e,d){this.$supers(a,"bind_",arguments);var c=this;d.push(function(){b(c)})},unbind_:function(){this.destroyBar_();this.$supers(a,"unbind_",arguments)},onSize:function(){this.$supers(a,"onSize",arguments);var c=this,d=this.desktop&&!this._nativebar;if(!this._scrollbar&&d){this._scrollbar=zul.mesh.Scrollbar.init(this)}setTimeout(function(){if(d){c.refreshBar_()}},200)},destroyBar_:function(){var c=this._scrollbar;if(c){c.destroy();c=this._scrollbar=null}},onResponse:function(c,d){if(this.desktop){if(this._shallFixEmpty){b(this)}}this.$supers(a,"onResponse",arguments)},_syncEmpty:function(){this._shallFixEmpty=true},onChildAdded_:function(c){this.$supers(a,"onChildAdded_",arguments);if(this.childReplacing_){this._fixOnAdd(c,true)}},insertChildHTML_:function(g,e,f){if(g.$instanceof(zul.grid.Rows)){this.rows=g;var d=this.$n("rows");if(d){jq(d).replaceWith(g.redrawHTML_());g.bind(f);this.ebodyrows=g.$n();return}else{var c=this.$n("tpad");if(c){jq(c).after(g.redrawHTML_());g.bind(f);this.ebodyrows=g.$n();return}else{if(this.ebodytbl){jq(this.ebodytbl).append(g.redrawHTML_());g.bind(f);this.ebodyrows=g.$n();return}}}}this.rerender()},getHeadWidgetClass:function(){return zul.grid.Columns},getBodyWidgetIterator:function(c){return new zul.grid.RowIter(this,c)},hasGroup:function(){return this.rows&&this.rows.hasGroup()}})})();zul.grid.RowIter=zk.$extends(zk.Object,{$init:function(a,b){this.grid=a;this.opts=b},_init:function(){if(!this._isInit){this._isInit=true;var a=this.grid.rows?this.grid.rows.firstChild:null;if(this.opts&&this.opts.skipHidden){for(;a&&!a.isVisible();a=a.nextSibling){}}this.p=a}},hasNext:function(){this._init();return this.p},next:function(){this._init();var b=this.p,a=b?b.nextSibling:null;if(this.opts&&this.opts.skipHidden){for(;a&&!a.isVisible();a=a.nextSibling){}}if(b){this.p=a}return b}});
zkreg('zul.grid.Grid');zk._m={};
zk._m['paging']=function(g){var b=this.uuid,i=this.getInnerWidth(),k=i=="100%"?' width="100%"':"",c=i!="100%"?"width:"+i:"",a=this.inPagingMold(),d;g.push("<div",this.domAttrs_(),">");if(a&&this.paging){d=this.getPagingPosition();if(d=="top"||d=="both"){g.push('<div id="',b,'-pgit" class="',this.$s("paging-top"),'">');this.paging.redraw(g);g.push("</div>")}}if(this.columns){g.push('<div id="',b,'-head" class="',this.$s("header"),'">','<table id="',b,'-headtbl"',k,' style="table-layout:fixed;',c,'">');this.domFaker_(g,"-hdfaker");g.push('<tbody id="',b,'-headrows">');for(var l=this.heads,f=0,h=l.length;f<h;){l[f++].redraw(g)}g.push('</tbody></table></div><div class="',this.$s("header-border"),'"></div>')}g.push('<div id="',b,'-body" class="',this.$s("body"));if(this._autopaging){g.push(" ",this.$s("autopaging"))}g.push('"');var e=this.getHeight();if(e){g.push(' style="height:',e,'"')}g.push(">");if(this.rows&&this.domPad_&&!this.inPagingMold()){this.domPad_(g,"-tpad")}g.push('<table id="',b,'-cave"',k,' style="table-layout:fixed;',c,'">');if(this.columns){this.domFaker_(g,"-bdfaker")}if(this.rows){this.rows.redraw(g)}this.redrawEmpty_(g);g.push("</table>");if(this.rows&&this.domPad_&&!this.inPagingMold()){this.domPad_(g,"-bpad")}g.push("</div>");if(this._nativebar&&this.frozen){g.push('<div id="',b,'-frozen" class="',this.$s("frozen"),'">');this.frozen.redraw(g);g.push("</div>")}if(this.foot){g.push('<div id="',b,'-foot" class="',this.$s("footer"),'">','<table id="',b,'-foottbl"',k,' style="table-layout:fixed;',c,'">');if(this.columns){this.domFaker_(g,"-ftfaker")}g.push('<tbody id="',b,'-footrows">');this.foot.redraw(g);g.push("</tbody></table></div>")}if(d=="bottom"||d=="both"){g.push('<div id="',b,'-pgib" class="',this.$s("paging-bottom"),'">');this.paging.redraw(g);g.push("</div>")}g.push("</div>")};
;zk._m['default']=[zk._p.p.Grid,'paging'];zkmld(zk._p.p.Grid,zk._m);(function(){var a=(function(){var b=zk.feature.pe;return function(){return b&&zk.isLoaded("zkex.grid")}})();zul.grid.Row=zk.$extends(zul.Widget,{setAlign:(function(b,c){return function(d,e){var f=this[b];this[b]=d;if(f!==d||(e&&e.force)){this.__fname__=b.substring(1);c.apply(this,arguments);delete this.__fname__}return this}})("_align",(function(b){var c=this.$n();if(c){c.align=b}})),getAlign:_zkf$=function(){return this._align},isAlign:_zkf$,setNowrap:(function(b,c){return function(d,e){var f=this[b];this[b]=d;if(f!==d||(e&&e.force)){this.__fname__=b.substring(1);c.apply(this,arguments);delete this.__fname__}return this}})("_nowrap",(function(b){var d=this.$n();if(d&&(d=d.cells)){for(var c=d.length;c--;){d[c].noWrap=b}}})),getNowrap:_zkf$=function(){return this._nowrap},isNowrap:_zkf$,setValign:(function(b,c){return function(d,e){var f=this[b];this[b]=d;if(f!==d||(e&&e.force)){this.__fname__=b.substring(1);c.apply(this,arguments);delete this.__fname__}return this}})("_valign",(function(b){var c=this.$n();if(c){c.vAlign=b}})),getValign:_zkf$=function(){return this._valign},isValign:_zkf$,getGrid:function(){return this.parent?this.parent.parent:null},setVisible:function(b){if(this.isVisible()!=b){this.$supers("setVisible",arguments);if(b&&this.isStripeable_()&&this.parent){this.parent.stripe()}}},getSpans:function(){return zUtl.intsToString(this._spans)},setSpans:function(b){if(this.getSpans()!=b){this._spans=zUtl.stringToInts(b,1);this.rerender()}},_getIndex:function(){return this.parent?this.getChildIndex():-1},getGroup:function(){if(a()&&this.parent&&this.parent.hasGroup()){for(var b=this;b;b=b.previousSibling){if(b.$instanceof(zkex.grid.Group)){return b}}}return null},setStyle:function(b){if(this._style!=b){if(!zk._rowTime){zk._rowTime=jq.now()}this._style=b;this.rerender()}},rerender:function(){if(this.desktop){this.$supers("rerender",arguments);if(this.parent){this.parent._syncStripe()}}},getSclass:function(){var c=this.$supers("getSclass",arguments);if(c!=null){return c}var b=this.getGrid();return b?b.getSclass():c},_getChdextr:function(b){return b.$n("chdextr")||b.$n()},scrollIntoView:function(){var b=this.getGrid()._scrollbar;if(b){b.syncSize();b.scrollToElement(this.$n())}else{this.$supers("scrollIntoView",arguments)}},insertChildHTML_:function(e,b,d){var c=this.encloseChildHTML_({child:e,index:e.getChildIndex(),zclass:this.getZclass()});if(b){jq(this._getChdextr(b)).before(c)}else{jq(this).append(c)}e.bind(d)},removeChildHTML_:function(b){this.$supers("removeChildHTML_",arguments);jq(b.uuid+"-chdextr",zk).remove()},encloseChildHTML_:function(d){var c=d.out||[],e=d.child,b=e.$instanceof(zul.wgt.Cell);if(!b){c.push('<td id="',e.uuid,'-chdextr"',this._childAttrs(e,d.index),'><div id="',e.uuid,'-cell" class="',d.zclass,'-content">')}e.redraw(c);if(!b){c.push("</div></td>")}if(!d.out){return c.join("")}},_childAttrs:function(f,g){var h=g,s=1;if(this._spans){for(var r=0,p=this._spans.length;r<p;++r){if(r==g){s=this._spans[r];break}h+=this._spans[r]-1}}var c,i,q,d,b=this.getGrid();if(b){var n=b.columns;if(n){if(h<n.nChildren){var e=n.getChildAt(h);c=e.isVisible()?"":"display:none;";i=e.getHeight();q=e.getAlign();d=e.getValign()}}}var t=this.domStyle_({visible:1,width:1,height:1}),m=zk.isLoaded("zkex.grid")&&f.$instanceof(zkex.grid.Detail);if(m){var l=f.getWidth();if(l){t+="width:"+l+";"}}if(c||i||q||d){t+=c;if(i){t+="height:"+i+";"}if(q){t+="text-align:"+q+";"}if(d){t+="vertical-align:"+d+";"}}var u=m?f.$s("outer"):this.$s("inner"),o="";if(s!==1){o+=' colspan="'+s+'"'}if(this._nowrap){o+=' nowrap="nowrap"'}if(t){o+=' style="'+t+'"'}return o+' class="'+u+'"'},isStripeable_:function(){return true},domStyle_:function(d){if((a()&&(this.$instanceof(zkex.grid.Group)||this.$instanceof(zkex.grid.Groupfoot)))||(d&&d.visible)){return this.$supers("domStyle_",arguments)}var b=this.$supers("domStyle_",arguments),c=this.getGroup();if(this._align){b+=" text-align:"+this._align+";"}if(this._valign){b+=" vertical-align:"+this._valign+";"}return c&&!c.isOpen()?b+"display:none;":b},onChildAdded_:function(b){this.$supers("onChildAdded_",arguments);if(b.$instanceof(zul.grid.Detail)){this.detail=b}},onChildRemoved_:function(b){this.$supers("onChildRemoved_",arguments);if(b==this.detail){this.detail=null}},doFocus_:function(b){this.$supers("doFocus_",arguments);var f=this.getGrid(),h=f?f.frozen:null,d=f&&f.rows?f.rows.$n():null,k,g;if(h&&d){g=jq(b.domTarget).parents("td");for(var e=0,c=g.length;e<c;e++){k=g[e];if(k.parentNode.parentNode==d){f._moveToHidingFocusCell(k.cellIndex);break}}}},doMouseOver_:function(b){if(this._musin){return}this._musin=true;var c=this.$n();if(c&&zk.gecko&&this._draggable&&!jq.nodeName(b.domTarget,"input","textarea")){jq(c).addClass("z-draggable-over")}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(b){var c=this.$n();if((this._musin&&jq.isAncestor(c,b.domEvent.relatedTarget||b.domEvent.toElement))){this.parent._musout=this;return}this._musin=false;if(c&&zk.gecko&&this._draggable&&!jq.nodeName(b.domTarget,"input","textarea")){jq(c).removeClass("z-draggable-over")}this.$supers("doMouseOut_",arguments)},domClass_:function(){var b=this.$supers("domClass_",arguments),c=this.getGrid();if(c&&jq(this.$n()).hasClass(c=c.getOddRowSclass())){return b+" "+c}return b},deferRedrawHTML_:function(b){b.push("<tr",this.domAttrs_({domClass:1}),' class="z-renderdefer"></tr>')}})})();
zkreg('zul.grid.Row');zk._m={};
zk._m['default']=function(c){c.push("<tr",this.domAttrs_(),">");var d=this.getZclass();for(var b=0,a=this.firstChild;a;a=a.nextSibling,b++){this.encloseChildHTML_({child:a,index:b,zclass:d,out:c})}c.push("</tr>")};
;zkmld(zk._p.p.Row,zk._m);(function(){var c=(function(){var d=zk.feature.pe;return function(){return d&&zk.isLoaded("zkex.grid")}})();function a(f){var d=f.getGrid(),e;if(d&&d._nativebar&&(e=d.frozen)){e._syncFrozen()}}var b=zul.grid.Rows=zk.$extends(zul.Widget,{_visibleItemCount:0,$init:function(){this.$supers("$init",arguments);this._groupsInfo=[]},setVisibleItemCount:(function(d){return function(e){this[d]=e;return this}})("_visibleItemCount"),getVisibleItemCount:_zkf$=function(){return this._visibleItemCount},isVisibleItemCount:_zkf$,getGrid:function(){return this.parent},getGroupCount:function(){return this._groupsInfo.length},getGroups:function(){return this._groupsInfo.$clone()},hasGroup:function(){return this._groupsInfo.length},bind_:function(h,g,f){this.$supers(b,"bind_",arguments);var e=this.getGrid();if(e){e.ebodyrows=this.$n()}zWatch.listen({onResponse:this});var d=this;f.push(function(){d.stripe();a(d)})},unbind_:function(){zWatch.unlisten({onResponse:this});this.$supers(b,"unbind_",arguments)},onResponse:function(){if(this.desktop){if(this._shallStripe){this.stripe();this.getGrid().onSize()}}},replaceChildHTML_:function(j,i,h,g,f){if(j._renderdefer){var d=this.getGrid().getOddRowSclass(),e=jq(i).hasClass(d);this.$supers("replaceChildHTML_",arguments);if(e){jq(j).addClass(d)}}else{this.$supers("replaceChildHTML_",arguments)}},_syncStripe:function(){this._shallStripe=true},stripe:function(){var g=this.getGrid(),d=g.getOddRowSclass();if(!d){return}var i=this.$n();if(!i){return}for(var f=0,e=this.firstChild,h=!(this._offset&1);e;e=e.nextSibling,++f){if(e.isVisible()&&e.isStripeable_()){for(;i.rows[f]&&i.rows[f].id!=e.uuid;++f){}jq(i.rows[f])[h?"removeClass":"addClass"](d);e.fire("onStripe");h=!h}}this._shallStripe=false},onChildAdded_:function(e){this.$supers("onChildAdded_",arguments);if(c()&&e.$instanceof(zkex.grid.Group)){this._groupsInfo.push(e)}var d;if((d=this.getGrid())){if(d.fixForRowAdd_){d.fixForRowAdd_()}d._syncEmpty()}this._syncStripe();if(this.desktop){a(this)}},onChildRemoved_:function(e){this.$supers("onChildRemoved_",arguments);if(c()&&e.$instanceof(zkex.grid.Group)){this._groupsInfo.$remove(e)}if(!this.childReplacing_){this._syncStripe()}var d=this.getGrid();if(d){d._syncEmpty()}},deferRedrawHTML_:function(d){d.push("<tbody",this.domAttrs_({domClass:1}),' class="z-renderdefer"></tbody>')}})})();
zkreg('zul.grid.Rows');zk._m={};
zk._m['default']=function(b){b.push("<tbody",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tbody>")};
;zkmld(zk._p.p.Rows,zk._m);zul.grid.Foot=zk.$extends(zul.Widget,{getGrid:function(){return this.parent},setVflex:function(a){a=false;this.$super(zul.grid.Foot,"setVflex",a)},setHflex:function(a){a=false;this.$super(zul.grid.Foot,"setHflex",a)},deferRedrawHTML_:function(a){a.push("<tr",this.domAttrs_({domClass:1}),' class="z-renderdefer"></tr>')}});
zkreg('zul.grid.Foot');zk._m={};
zk._m['default']=function(b){b.push("<tr",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}var c=this.getGrid();if(c._nativebar&&!c.frozen){b.push('<td class="',this.$s("bar"),'" />')}b.push("</tr>")};
;zkmld(zk._p.p.Foot,zk._m);zul.grid.Footer=zk.$extends(zul.mesh.FooterWidget,{getGrid:function(){return this.getMeshWidget()},getColumn:function(){return this.getHeaderWidget()}});
zkreg('zul.grid.Footer',true);zk._m={};
zk._m['default']=function(b){b.push("<td",this.domAttrs_(),'><div id="',this.uuid,'-cave" class="',this.getZclass(),'-content">',this.domContent_());for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div></td>")};
;zkmld(zk._p.p.Footer,zk._m);
}finally{zk.setLoaded(zk._p.n);}});zk.setLoaded('zul.grid',1);